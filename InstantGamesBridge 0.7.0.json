{
  "author": "",
  "category": "General",
  "extensionNamespace": "",
  "fullName": "Instant Games Bridge",
  "helpPath": "https://getbridge.org/",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBhdGggZD0iTTI4LDE3LjFjMS4yLTEuMiwyLTIuOSwyLTQuNmMwLTMuNC0yLjctNi4yLTYtNi41Yy0wLjItMi4zLTIuMi00LTQuNS00Yy0xLjQsMC0yLjcsMC43LTMuNSwxLjdjLTAuOC0xLTIuMS0xLjctMy41LTEuNw0KCUMxMC4yLDIsOC4zLDMuOCw4LDZjLTMuNCwwLjItNiwzLjEtNiw2LjVjMCwwLjMsMCwwLjYsMC4xLDAuOWMwLDAuMSwwLDAuMiwwLDAuM2MwLDAuMywwLjEsMC41LDAuMiwwLjdjMCwwLjIsMC4xLDAuMywwLjIsMC41DQoJYzAsMC4xLDAuMSwwLjIsMC4xLDAuMmMwLjMsMC44LDAuOCwxLjUsMS40LDJjLTAuNiwxLTAuOSwyLjItMC45LDMuNGMwLDMuMSwyLjIsNS44LDUuMiw2LjRjMC42LDEuOCwyLjMsMy4xLDQuMywzLjENCgljMS40LDAsMi43LTAuNywzLjUtMS43YzAuOCwxLDIuMSwxLjcsMy41LDEuN2MyLDAsMy43LTEuMyw0LjMtMy4xYzIuNy0wLjUsNC44LTIuOCw1LjEtNS41QzI5LDIxLjMsMjksMjEuMSwyOSwyMQ0KCWMwLTAuMSwwLTAuMiwwLTAuM2MwLTAuMSwwLTAuMiwwLTAuMkMyOSwxOS4zLDI4LjcsMTguMSwyOCwxNy4xeiBNMjEuNywxNS43bC04LDhDMTMuNSwyMy45LDEzLjMsMjQsMTMsMjRjLTAuMiwwLTAuNCwwLTAuNS0wLjENCgljLTAuNC0wLjItMC42LTAuNy0wLjQtMS4ybDEuNi00LjdIMTFjLTAuNCwwLTAuOC0wLjMtMC45LTAuNmMtMC4yLTAuNC0wLjEtMC44LDAuMi0xLjFsOC41LThjMC4zLTAuMywwLjktMC40LDEuMy0wLjENCgljMC40LDAuMywwLjUsMC44LDAuNCwxLjJMMTguNSwxNEgyMWMwLjQsMCwwLjgsMC4yLDAuOSwwLjZDMjIuMSwxNSwyMiwxNS40LDIxLjcsMTUuN3oiLz4NCjwvc3ZnPg0K",
  "name": "InstantGamesBridge",
  "previewIconUrl": "https://asset-resources.gdevelop.io/public-resources/Icons/Glyphster Pack/Master/SVG/Business and Finance/1bebd4bafc0c7d1c4ed49eb98561f3684b8c676663e174de50c42555d295049f_Business and Finance_brainstorming_brain_storming_storm.svg",
  "shortDescription": "Instant Games Bridge is a single free SDK for publishing HTML5 games on different platforms. ",
  "version": "0.7.0",
  "description": [
    "- Saving and loading the player's progress",
    "- Advertising monetization: Banner, Interstitial, Rewarded",
    "- In-game purchases",
    "- Social functions (share, invite a friend, add to favorites, etc.)",
    "- Leaderboards",
    "- Information about the language, device",
    "- Remote configuration",
    "And other things"
  ],
  "tags": [],
  "authorIds": [
    "l2OaORwcgyX7y4HQY2dHPmdTuDj2"
  ],
  "dependencies": [],
  "globalVariables": [
    {
      "folded": true,
      "name": "IGB_initialize",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_events_subscribed",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_Reward_State",
      "type": "string",
      "value": "null"
    },
    {
      "folded": true,
      "name": "IGB_Reward_Rewarded",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_Inters_State",
      "type": "string",
      "value": "null"
    },
    {
      "folded": true,
      "name": "IGB_YA_NoAuthorizes",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_YA_socialRate",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_YA_leaderboardGetSuccess",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_YA_leaderboardSetSuccess",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_VK_joinCommunity",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_VK_inviteFriends",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_VK_shareGame",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_VK_Favorites",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_VK_showNativePopup",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_VK_createPost",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_VK_addToHomeScreen",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_StorageSetSuccess",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_Set_keyArray",
      "type": "array",
      "children": []
    },
    {
      "folded": true,
      "name": "IGB_Set_valArray",
      "type": "array",
      "children": []
    },
    {
      "folded": true,
      "name": "IGB_Get_keyArray",
      "type": "array",
      "children": []
    },
    {
      "folded": true,
      "name": "IGB_Get_varArray",
      "type": "array",
      "children": []
    },
    {
      "folded": true,
      "name": "IGB_StorageDelSuccess",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_Del_keyArray",
      "type": "array",
      "children": []
    },
    {
      "folded": true,
      "name": "IGB_PurchaseSuccess",
      "type": "boolean",
      "value": false
    },
    {
      "name": "IGB_ConsumePurchaseSuccess",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_ServerTime",
      "type": "number",
      "value": 0
    },
    {
      "folded": true,
      "name": "IGB_GetServerTimeSuccess",
      "type": "boolean",
      "value": false
    },
    {
      "folded": true,
      "name": "IGB_AdBlock",
      "type": "boolean",
      "value": false
    }
  ],
  "sceneVariables": [],
  "eventsFunctions": [
    {
      "fullName": "",
      "functionType": "Action",
      "name": "onFirstSceneLoaded",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "(()=>{var e={258:e=>{!function(t){e.exports=t;var r=\"listeners\",n={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,a(r,e).push(n),r;function n(){i.call(r,e,n),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,n=a(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(e){e.call(r)}));else if(2===o)n.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,i)}))}return!!n.length}};function o(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,o=this;if(arguments.length){if(t){if(n=a(o,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(o,e);o[r][e]=n}}else if((n=o[r])&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(e,t,n){if(!n||e[r]){var o=e[r]||(e[r]={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{\"use strict\";var e={VK:\"vk\",VK_PLAY:\"vk_play\",OK:\"ok\",YANDEX:\"yandex\",CRAZY_GAMES:\"crazy_games\",ABSOLUTE_GAMES:\"absolute_games\",GAME_DISTRIBUTION:\"game_distribution\",PLAYGAMA:\"playgama\",WORTAL:\"wortal\",PLAYDECK:\"playdeck\",MOCK:\"mock\"},t={PLATFORM:\"platform\",PLAYER:\"player\",GAME:\"game\",STORAGE:\"storage\",ADVERTISEMENT:\"advertisement\",SOCIAL:\"social\",DEVICE:\"device\",LEADERBOARD:\"leaderboard\",PAYMENTS:\"payments\",REMOTE_CONFIG:\"remote_config\",CLIPBOARD:\"clipboard\"},n={INTERSTITIAL_STATE_CHANGED:\"interstitial_state_changed\",REWARDED_STATE_CHANGED:\"rewarded_state_changed\",BANNER_STATE_CHANGED:\"banner_state_changed\",VISIBILITY_STATE_CHANGED:\"visibility_state_changed\"},o={VISIBLE:\"visible\",HIDDEN:\"hidden\"},i={LOADING:\"loading\",OPENED:\"opened\",CLOSED:\"closed\",FAILED:\"failed\"},a={LOADING:\"loading\",OPENED:\"opened\",CLOSED:\"closed\",FAILED:\"failed\",REWARDED:\"rewarded\"},s={LOADING:\"loading\",SHOWN:\"shown\",HIDDEN:\"hidden\",FAILED:\"failed\"},u={LOCAL_STORAGE:\"local_storage\",PLATFORM_INTERNAL:\"platform_internal\"},c={DESKTOP:\"desktop\",MOBILE:\"mobile\",TABLET:\"tablet\",TV:\"tv\"},l={GAME_READY:\"game_ready\",IN_GAME_LOADING_STARTED:\"in_game_loading_started\",IN_GAME_LOADING_STOPPED:\"in_game_loading_stopped\",GAMEPLAY_STARTED:\"gameplay_started\",GAMEPLAY_STOPPED:\"gameplay_stopped\",PLAYER_GOT_ACHIEVEMENT:\"player_got_achievement\",GAME_OVER:\"game_over\"},f={INITIALIZE:\"initialize\",AUTHORIZE_PLAYER:\"authorize_player\",SHARE:\"share\",INVITE_FRIENDS:\"invite_friends\",JOIN_COMMUNITY:\"join_community\",CREATE_POST:\"create_post\",ADD_TO_HOME_SCREEN:\"add_to_home_screen\",ADD_TO_FAVORITES:\"add_to_favorites\",RATE:\"rate\",SET_LEADERBOARD_SCORE:\"set_leaderboard_score\",GET_LEADERBOARD_SCORE:\"get_leaderboard_score\",GET_LEADERBOARD_ENTRIES:\"get_leaderboard_entries\",GET_PURCHASES:\"get_purchases\",GET_CATALOG:\"get_catalog\",PURCHASE:\"purchase\",CONSUME_PURCHASE:\"consume_purchase\",GET_REMOTE_CONFIG:\"get_remote_config\",GET_STORAGE_DATA:\"get_storage_data\",SHOW_LEADERBOARD_NATIVE_POPUP:\"show_leaderboard_native_popup\",CLIPBOARD_WRITE:\"clipboard_write\",ADBLOCK_DETECT:\"adblock_detect\"},p={message:\"Before using the SDK you must initialize it\"},y={message:\"Storage not supported\"},d={message:\"Storage not available\"},h={message:\"GameDistribution Game ID is undefined\"},m={message:\"VK Play Game ID is undefined\"},v={message:\"OK Game params are not found\"},_={message:\"Message is too long\"};function b(e){return b=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},b(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function S(e){var t=function(e,t){if(\"object\"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=b(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==b(t)?t:String(t)}function w(e,t,r){!function(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}(e,t),t.set(e,r)}function P(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(e,A(e,t,\"set\"),r),r}function E(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,A(e,t,\"get\"))}function A(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}var O=new WeakMap,k=new WeakMap,T=new WeakMap;const D=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),w(this,O,{writable:!0,value:void 0}),w(this,k,{writable:!0,value:void 0}),w(this,T,{writable:!0,value:void 0}),P(this,O,new Promise((function(e,r){P(t,k,e),P(t,T,r)})))}var t,r;return t=e,(r=[{key:\"promise\",get:function(){return E(this,O)}},{key:\"resolve\",value:function(e){E(this,k).call(this,e)}},{key:\"reject\",value:function(e){E(this,T).call(this,e)}}])&&g(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),e}();function I(e){return I=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},I(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function j(e){var t=function(e,t){if(\"object\"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=I(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==I(t)?t:String(t)}const L=function(){function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),r=this,o=void 0,(n=j(n=\"_platformBridge\"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=t}var t,r;return t=e,(r=[{key:\"initialize\",value:function(){return Promise.resolve()}}])&&R(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),e}();function N(e){return N=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},N(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,B(n.key),n)}}function B(e){var t=function(e,t){if(\"object\"!=N(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=N(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==N(t)?t:String(t)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}const G=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&M(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(n);if(o){var r=F(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===N(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:\"id\",get:function(){return this._platformBridge.platformId}},{key:\"sdk\",get:function(){return this._platformBridge.platformSdk}},{key:\"language\",get:function(){return this._platformBridge.platformLanguage}},{key:\"payload\",get:function(){return this._platformBridge.platformPayload}},{key:\"tld\",get:function(){return this._platformBridge.platformTld}},{key:\"sendMessage\",value:function(e){return this._platformBridge.sendMessage(e)}},{key:\"getServerTime\",value:function(){return this._platformBridge.getServerTime()}}])&&C(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),a}(L);function W(e){return W=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},W(e)}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,H(n.key),n)}}function H(e){var t=function(e,t){if(\"object\"!=W(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=W(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==W(t)?t:String(t)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}const V=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&U(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(o){var r=x(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===W(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:\"isAuthorizationSupported\",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:\"isAuthorized\",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:\"id\",get:function(){return this._platformBridge.playerId}},{key:\"name\",get:function(){return this._platformBridge.playerName}},{key:\"photos\",get:function(){return this._platformBridge.playerPhotos}},{key:\"authorize\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&z(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),a}(L);var Y=r(258),Z=r.n(Y);function K(e){return K=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},K(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,q(n.key),n)}}function q(e){var t=function(e,t){if(\"object\"!=K(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=K(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==K(t)?t:String(t)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var Q=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&X(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(o);if(i){var r=$(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===K(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,s),(t=a.call(this,e))._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(n.VISIBILITY_STATE_CHANGED,e)})),t}return t=s,(r=[{key:\"visibilityState\",get:function(){return this._platformBridge.visibilityState}}])&&J(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),s}(L);Z().mixin(Q.prototype);const ee=Q;function te(e){return te=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},te(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,ne(n.key),n)}}function ne(e){var t=function(e,t){if(\"object\"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=te(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==te(t)?t:String(t)}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}const ae=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&oe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ie(n);if(o){var r=ie(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===te(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:\"defaultType\",get:function(){return this._platformBridge.defaultStorageType}},{key:\"isSupported\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:\"isAvailable\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageAvailable(e)}},{key:\"get\",value:function(e,t){if(t){var r=t[this._platformBridge.platformId];if(r)return this.get(e,r)}var n=t;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.getDataFromStorage(e,n):Promise.reject()}},{key:\"set\",value:function(e,t,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(e,t,n)}var o=r;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.setDataToStorage(e,t,o):Promise.reject()}},{key:\"delete\",value:function(e,t){if(t){var r=t[this._platformBridge.platformId];if(r)return this.delete(e,r)}var n=t;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.deleteDataFromStorage(e,n):Promise.reject()}}])&&re(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),a}(L);function se(e){return se=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},se(e)}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,ce(n.key),n)}}function ce(e){var t=function(e,t){if(\"object\"!=se(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=se(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==se(t)?t:String(t)}function le(e,t){pe(e,t),t.add(e)}function fe(e,t,r){pe(e,t),t.set(e,r)}function pe(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}function ye(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}function de(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(e,me(e,t,\"set\"),r),r}function he(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,me(e,t,\"get\"))}function me(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}var ve=\"created\",_e=\"completed\",be=new WeakMap,ge=new WeakMap,Se=new WeakMap,we=new WeakMap,Pe=new WeakSet,Ee=new WeakSet,Ae=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),le(this,Ee),le(this,Pe),fe(this,be,{writable:!0,value:0}),fe(this,ge,{writable:!0,value:0}),fe(this,Se,{writable:!0,value:ve}),fe(this,we,{writable:!0,value:0}),de(this,be,t)}var t,r;return t=e,(r=[{key:\"state\",get:function(){return he(this,Se)}},{key:\"start\",value:function(){var e=this;he(this,Se)!==ve&&he(this,Se)!==_e||(de(this,ge,he(this,be)),ye(this,Pe,Oe).call(this,\"started\"),de(this,we,setInterval((function(){de(e,ge,he(e,ge)-1),e.emit(\"time_left_changed\",he(e,ge)),he(e,ge)<=0&&(ye(e,Ee,ke).call(e),ye(e,Pe,Oe).call(e,_e))}),1e3)))}},{key:\"stop\",value:function(){ye(this,Ee,ke).call(this),ye(this,Pe,Oe).call(this,\"stopped\")}}])&&ue(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),e}();function Oe(e){de(this,Se,e),this.emit(\"state_changed\",he(this,Se))}function ke(){de(this,ge,0),clearInterval(he(this,we))}Z().mixin(Ae.prototype);const Te=Ae;function De(e){return De=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},De(e)}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,Re(n.key),n)}}function Re(e){var t=function(e,t){if(\"object\"!=De(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=De(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==De(t)?t:String(t)}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Le(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Ce(e,t){Me(e,t),t.add(e)}function Be(e,t,r){Me(e,t),t.set(e,r)}function Me(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}function Fe(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(e,ze(e,t,\"set\"),r),r}function Ge(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}function We(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ze(e,t,\"get\"))}function ze(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}var He=new WeakMap,Ue=new WeakMap,xe=new WeakSet,Ve=new WeakSet,Ye=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&je(e,t)}(l,e);var t,r,o,u,c=(o=l,u=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ne(o);if(u){var r=Ne(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===De(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return Le(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,l),Ce(Le(t=c.call(this,e)),Ve),Ce(Le(t),xe),Be(Le(t),He,{writable:!0,value:void 0}),Be(Le(t),Ue,{writable:!0,value:60}),t._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(e){e===i.CLOSED&&We(Le(t),Ue)>0&&Ge(Le(t),xe,Ze).call(Le(t)),t.emit(n.INTERSTITIAL_STATE_CHANGED,e)})),t._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(e){return t.emit(n.REWARDED_STATE_CHANGED,e)})),t._platformBridge.on(n.BANNER_STATE_CHANGED,(function(e){return t.emit(n.BANNER_STATE_CHANGED,e)})),t}return t=l,(r=[{key:\"isBannerSupported\",get:function(){return this._platformBridge.isBannerSupported}},{key:\"bannerState\",get:function(){return this._platformBridge.bannerState}},{key:\"interstitialState\",get:function(){return this._platformBridge.interstitialState}},{key:\"rewardedState\",get:function(){return this._platformBridge.rewardedState}},{key:\"minimumDelayBetweenInterstitial\",get:function(){return We(this,Ue)}},{key:\"setMinimumDelayBetweenInterstitial\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(void 0!==t)return void this.setMinimumDelayBetweenInterstitial(t)}var r=De(e),n=We(this,Ue);switch(r){case\"number\":n=e;break;case\"string\":if(n=parseInt(e,10),Number.isNaN(n))return;break;default:return}Fe(this,Ue,n),We(this,He)&&(We(this,He).stop(),Ge(this,xe,Ze).call(this))}},{key:\"showBanner\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showBanner(t)}this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN&&(this._platformBridge._setBannerState(s.LOADING),this.isBannerSupported?this._platformBridge.showBanner(e):this._platformBridge._setBannerState(s.FAILED))}},{key:\"hideBanner\",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:\"showInterstitial\",value:function(e){if(!Ge(this,Ve,Ke).call(this)){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showInterstitial(t)}var r=!1;e&&\"boolean\"==typeof e.ignoreDelay&&(r=e.ignoreDelay),this._platformBridge._setInterstitialState(i.LOADING),!We(this,He)||We(this,He).state===_e||r?this._platformBridge.showInterstitial(e):this._platformBridge._setInterstitialState(i.FAILED)}}},{key:\"showRewarded\",value:function(e){if(!Ge(this,Ve,Ke).call(this)){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showRewarded(t)}this._platformBridge._setRewardedState(a.LOADING),this._platformBridge.showRewarded(e)}}},{key:\"checkAdBlock\",value:function(){return this._platformBridge.checkAdBlock()}}])&&Ie(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),l}(L);function Ze(){Fe(this,He,new Te(We(this,Ue))),We(this,He).start()}function Ke(){return this.interstitialState===i.LOADING||this.interstitialState===i.OPENED||!![a.LOADING,a.OPENED,a.REWARDED].includes(this.rewardedState)}Z().mixin(Ye.prototype);const Je=Ye;function qe(e){return qe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},qe(e)}function Xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,$e(n.key),n)}}function $e(e){var t=function(e,t){if(\"object\"!=qe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=qe(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==qe(t)?t:String(t)}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qe(e,t)}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}const tt=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Qe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=et(n);if(o){var r=et(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===qe(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:\"isInviteFriendsSupported\",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:\"isJoinCommunitySupported\",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:\"isShareSupported\",get:function(){return this._platformBridge.isShareSupported}},{key:\"isCreatePostSupported\",get:function(){return this._platformBridge.isCreatePostSupported}},{key:\"isAddToHomeScreenSupported\",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:\"isAddToFavoritesSupported\",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:\"isRateSupported\",get:function(){return this._platformBridge.isRateSupported}},{key:\"isExternalLinksAllowed\",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:\"inviteFriends\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.inviteFriends(t)}return this._platformBridge.inviteFriends(e)}},{key:\"joinCommunity\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:\"share\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:\"createPost\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:\"addToHomeScreen\",value:function(){return this._platformBridge.addToHomeScreen()}},{key:\"addToFavorites\",value:function(){return this._platformBridge.addToFavorites()}},{key:\"rate\",value:function(){return this._platformBridge.rate()}}])&&Xe(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),a}(L);function rt(e){return rt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},rt(e)}function nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,ot(n.key),n)}}function ot(e){var t=function(e,t){if(\"object\"!=rt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=rt(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==rt(t)?t:String(t)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}const st=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&it(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=at(n);if(o){var r=at(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===rt(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:\"type\",get:function(){return this._platformBridge.deviceType}}])&&nt(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),a}(L);function ut(e){return ut=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},ut(e)}function ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,lt(n.key),n)}}function lt(e){var t=function(e,t){if(\"object\"!=ut(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=ut(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==ut(t)?t:String(t)}function ft(e,t){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ft(e,t)}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}const yt=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&ft(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pt(n);if(o){var r=pt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===ut(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:\"isSupported\",get:function(){return this._platformBridge.isLeaderboardSupported}},{key:\"isNativePopupSupported\",get:function(){return this._platformBridge.isLeaderboardNativePopupSupported}},{key:\"isMultipleBoardsSupported\",get:function(){return this._platformBridge.isLeaderboardMultipleBoardsSupported}},{key:\"isSetScoreSupported\",get:function(){return this._platformBridge.isLeaderboardSetScoreSupported}},{key:\"isGetScoreSupported\",get:function(){return this._platformBridge.isLeaderboardGetScoreSupported}},{key:\"isGetEntriesSupported\",get:function(){return this._platformBridge.isLeaderboardGetEntriesSupported}},{key:\"setScore\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.setScore(t)}return this._platformBridge.setLeaderboardScore(e)}},{key:\"getScore\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getScore(t)}return this._platformBridge.getLeaderboardScore(e)}},{key:\"getEntries\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getEntries(t)}return this._platformBridge.getLeaderboardEntries(e)}},{key:\"showNativePopup\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showLeaderboardNativePopup(e)}}])&&ct(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),a}(L);function dt(e){return dt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},dt(e)}function ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,mt(n.key),n)}}function mt(e){var t=function(e,t){if(\"object\"!=dt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=dt(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==dt(t)?t:String(t)}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}const bt=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&vt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_t(n);if(o){var r=_t(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===dt(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:\"isSupported\",get:function(){return this._platformBridge.isPaymentsSupported}},{key:\"purchase\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.purchase(t)}return this._platformBridge.purchase(e)}},{key:\"getPurchases\",value:function(){return this._platformBridge.getPaymentsPurchases()}},{key:\"getCatalog\",value:function(){return this._platformBridge.getPaymentsCatalog()}},{key:\"consumePurchase\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.consumePurchase(t)}return this._platformBridge.consumePurchase(e)}}])&&ht(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),a}(L);function gt(e){return gt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},gt(e)}function St(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,wt(n.key),n)}}function wt(e){var t=function(e,t){if(\"object\"!=gt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=gt(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==gt(t)?t:String(t)}function Pt(e,t){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pt(e,t)}function Et(e){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Et(e)}const At=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Pt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Et(n);if(o){var r=Et(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===gt(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:\"isSupported\",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:\"get\",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.get(t)}return this._platformBridge.getRemoteConfig(e)}}])&&St(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),a}(L);function Ot(e){return Ot=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Ot(e)}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,Tt(n.key),n)}}function Tt(e){var t=function(e,t){if(\"object\"!=Ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=Ot(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==Ot(t)?t:String(t)}function Dt(e,t){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dt(e,t)}function It(e){return It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},It(e)}const Rt=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Dt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=It(n);if(o){var r=It(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===Ot(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:\"isSupported\",get:function(){return this._platformBridge.isClipboardSupported}},{key:\"read\",value:function(){return this._platformBridge.clipboardRead()}},{key:\"write\",value:function(e){return this._platformBridge.clipboardWrite(e)}}])&&kt(t.prototype,r),Object.defineProperty(t,\"prototype\",{writable:!1}),a}(L);function jt(e){return jt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},jt(e)}function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,Bt(n.key),n)}}function Ct(e,t,r){return(t=Bt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bt(e){var t=function(e,t){if(\"object\"!=jt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=jt(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==jt(t)?t:String(t)}function Mt(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var Ft=new WeakMap,Gt=function(){function t(e){var r,i,a,s=this;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),Ct(this,\"_isInitialized\",!1),Ct(this,\"_platformSdk\",null),Ct(this,\"_isPlayerAuthorized\",!1),Ct(this,\"_playerId\",null),Ct(this,\"_playerName\",null),Ct(this,\"_playerPhotos\",[]),Ct(this,\"_visibilityState\",null),Ct(this,\"_localStorage\",null),Ct(this,\"_defaultStorageType\",u.LOCAL_STORAGE),Ct(this,\"_platformStorageCachedData\",null),Ct(this,\"_isBannerSupported\",!1),Ct(this,\"_interstitialState\",null),Ct(this,\"_rewardedState\",null),Ct(this,\"_bannerState\",null),a={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}(r=this,i=Ft),i.set(r,a);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState=\"visible\"===document.visibilityState?o.VISIBLE:o.HIDDEN,document.addEventListener(\"visibilitychange\",(function(){s._visibilityState=\"visible\"===document.visibilityState?o.VISIBLE:o.HIDDEN,s.emit(n.VISIBILITY_STATE_CHANGED,s._visibilityState)})),e&&(this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach((function(t){Ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}var r,l;return r=t,(l=[{key:\"platformId\",get:function(){return e.MOCK}},{key:\"platformSdk\",get:function(){return this._platformSdk}},{key:\"platformLanguage\",get:function(){var e=navigator.language;return\"string\"==typeof e?e.substring(0,2).toLowerCase():\"en\"}},{key:\"platformPayload\",get:function(){return new URL(window.location.href).searchParams.get(\"payload\")}},{key:\"platformTld\",get:function(){return null}},{key:\"visibilityState\",get:function(){return this._visibilityState}},{key:\"isPlayerAuthorizationSupported\",get:function(){return!1}},{key:\"isPlayerAuthorized\",get:function(){return this._isPlayerAuthorized}},{key:\"playerId\",get:function(){return this._playerId}},{key:\"playerName\",get:function(){return this._playerName}},{key:\"playerPhotos\",get:function(){return this._playerPhotos}},{key:\"defaultStorageType\",get:function(){return this._defaultStorageType}},{key:\"isBannerSupported\",get:function(){return this._isBannerSupported}},{key:\"bannerState\",get:function(){return this._bannerState}},{key:\"interstitialState\",get:function(){return this._interstitialState}},{key:\"rewardedState\",get:function(){return this._rewardedState}},{key:\"isInviteFriendsSupported\",get:function(){return!1}},{key:\"isJoinCommunitySupported\",get:function(){return!1}},{key:\"isShareSupported\",get:function(){return!1}},{key:\"isCreatePostSupported\",get:function(){return!1}},{key:\"isAddToHomeScreenSupported\",get:function(){return!1}},{key:\"isAddToFavoritesSupported\",get:function(){return!1}},{key:\"isRateSupported\",get:function(){return!1}},{key:\"isExternalLinksAllowed\",get:function(){return!1}},{key:\"deviceType\",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return c.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return c.TABLET}return c.DESKTOP}},{key:\"isLeaderboardSupported\",get:function(){return!1}},{key:\"isLeaderboardNativePopupSupported\",get:function(){return!1}},{key:\"isLeaderboardMultipleBoardsSupported\",get:function(){return!1}},{key:\"isLeaderboardSetScoreSupported\",get:function(){return!1}},{key:\"isLeaderboardGetScoreSupported\",get:function(){return!1}},{key:\"isLeaderboardGetEntriesSupported\",get:function(){return!1}},{key:\"isPaymentsSupported\",get:function(){return!1}},{key:\"isRemoteConfigSupported\",get:function(){return!1}},{key:\"isClipboardSupported\",get:function(){return!0}},{key:\"initialize\",value:function(){return Promise.resolve()}},{key:\"sendMessage\",value:function(){return Promise.resolve()}},{key:\"getServerTime\",value:function(){return new Promise((function(e,t){fetch(\"https://worldtimeapi.org/api/timezone/Etc/UTC\").then((function(e){if(!e.ok)throw new Error(\"Network response was not ok\");return e.json()})).then((function(t){e(1e3*t.unixtime)})).catch((function(){t()}))}))}},{key:\"authorizePlayer\",value:function(){return Promise.reject()}},{key:\"isStorageSupported\",value:function(e){switch(e){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:\"isStorageAvailable\",value:function(e){switch(e){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:\"getDataFromStorage\",value:function(e,t){if(t===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this._getDataFromLocalStorage(e[n]));return Promise.resolve(r)}var o=this._getDataFromLocalStorage(e);return Promise.resolve(o)}return Promise.reject(y)}return Promise.reject(y)}},{key:\"setDataToStorage\",value:function(e,t,r){if(r===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this._setDataToLocalStorage(e[n],t[n]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(y)}return Promise.reject(y)}},{key:\"deleteDataFromStorage\",value:function(e,t){if(t===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(y)}return Promise.reject(y)}},{key:\"showBanner\",value:function(){this._setBannerState(s.FAILED)}},{key:\"hideBanner\",value:function(){this._setBannerState(s.HIDDEN)}},{key:\"showInterstitial\",value:function(){this._setInterstitialState(i.FAILED)}},{key:\"showRewarded\",value:function(){this._setRewardedState(a.FAILED)}},{key:\"checkAdBlock\",value:function(){var e=document.createElement(\"div\");e.className=\"textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox\",e.style.position=\"absolute\",e.style.left=\"-9999px\",e.style.width=\"1px\",e.style.height=\"1px\",document.body.appendChild(e);var t={method:\"HEAD\",mode:\"no-cors\"};return new Promise((function(r){fetch(\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\",t).then((function(t){t.redirected?r(t.redirected):window.setTimeout((function(){var t,n=0===e.offsetHeight||\"none\"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display);r(n),e.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:\"inviteFriends\",value:function(){return Promise.reject()}},{key:\"joinCommunity\",value:function(){return Promise.reject()}},{key:\"share\",value:function(){return Promise.reject()}},{key:\"createPost\",value:function(){return Promise.reject()}},{key:\"addToHomeScreen\",value:function(){return Promise.reject()}},{key:\"addToFavorites\",value:function(){return Promise.reject()}},{key:\"rate\",value:function(){return Promise.reject()}},{key:\"setLeaderboardScore\",value:function(){return Promise.reject()}},{key:\"getLeaderboardScore\",value:function(){return Promise.reject()}},{key:\"getLeaderboardEntries\",value:function(){return Promise.reject()}},{key:\"showLeaderboardNativePopup\",value:function(){return Promise.reject()}},{key:\"purchase\",value:function(){return Promise.reject()}},{key:\"getPaymentsPurchases\",value:function(){return Promise.reject()}},{key:\"getPaymentsCatalog\",value:function(){return Promise.reject()}},{key:\"consumePurchase\",value:function(){return Promise.reject()}},{key:\"getRemoteConfig\",value:function(){return Promise.reject()}},{key:\"clipboardRead\",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:\"clipboardWrite\",value:function(e){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(e):Promise.reject()}},{key:\"_getDataFromLocalStorage\",value:function(e){var t=this._localStorage.getItem(e);if(\"string\"==typeof t)try{t=JSON.parse(t)}catch(e){}return t}},{key:\"_setDataToLocalStorage\",value:function(e,t){this._localStorage.setItem(e,\"object\"===jt(t)?JSON.stringify(t):t)}},{key:\"_deleteDataFromLocalStorage\",value:function(e){this._localStorage.removeItem(e)}},{key:\"_setInterstitialState\",value:function(e){this._interstitialState===e&&e!==i.FAILED||(this._interstitialState=e,this.emit(n.INTERSTITIAL_STATE_CHANGED,this._interstitialState))}},{key:\"_setRewardedState\",value:function(e){this._rewardedState===e&&e!==a.FAILED||(this._rewardedState=e,this.emit(n.REWARDED_STATE_CHANGED,this._rewardedState))}},{key:\"_setBannerState\",value:function(e){this._bannerState===e&&e!==s.FAILED||(this._bannerState=e,this.emit(n.BANNER_STATE_CHANGED,this._bannerState))}},{key:\"_createPromiseDecorator\",value:function(e){var t=new D;return Mt(this,Ft)[e]=t,t}},{key:\"_getPromiseDecorator\",value:function(e){return Mt(this,Ft)[e]}},{key:\"_resolvePromiseDecorator\",value:function(e,t){Mt(this,Ft)[e]&&(Mt(this,Ft)[e].resolve(t),delete Mt(this,Ft)[e])}},{key:\"_rejectPromiseDecorator\",value:function(e,t){Mt(this,Ft)[e]&&(Mt(this,Ft)[e].reject(t),delete Mt(this,Ft)[e])}}])&&Nt(r.prototype,l),Object.defineProperty(r,\"prototype\",{writable:!1}),t}();Z().mixin(Gt.prototype);const Wt=Gt;var zt=function(e){return new Promise((function(t){var r=document.createElement(\"script\");r.src=e,r.addEventListener(\"load\",t),document.head.appendChild(r)}))},Ht=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=0?Promise.resolve():new Promise((function(e){var r=setInterval((function(){for(var n=window,o=0;o<t.length;o++){var i=n[t[o]];if(!i)return;n=i}e(),clearInterval(r)}),100)}))};function Ut(e){return Ut=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Ut(e)}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,Vt(n.key),n)}}function Vt(e){var t=function(e,t){if(\"object\"!=Ut(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=Ut(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==Ut(t)?t:String(t)}function Yt(){return Yt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Yt.apply(this,arguments)}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}function Kt(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jt(e)}function qt(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}function Xt(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}function $t(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Qt(e,t,\"get\"))}function Qt(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}var er=new WeakMap,tr=new WeakSet;function rr(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"result\",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,n).then((function(t){t[o]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const nr=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Zt(e,t)}(y,t);var r,n,o,l,p=(o=y,l=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jt(o);if(l){var r=Jt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===Ut(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return Kt(e)}(this,e)});function y(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,y);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return qt(t=Kt(e=p.call.apply(p,[this].concat(o))),r=tr),r.add(t),function(e,t,r){qt(e,t),t.set(e,{writable:!0,value:void 0})}(Kt(e),er),e}return r=y,(n=[{key:\"platformId\",get:function(){return e.VK}},{key:\"platformLanguage\",get:function(){var e=new URL(window.location.href);if(e.searchParams.has(\"language\")){var t=e.searchParams.get(\"language\"),r=0;try{r=parseInt(t,10)}catch(e){r=0}switch(r){case 0:default:return\"ru\";case 1:return\"uk\";case 2:return\"be\";case 3:return\"en\"}}return Yt(Jt(y.prototype),\"platformLanguage\",this)}},{key:\"platformPayload\",get:function(){var e=new URL(window.location.href);return e.searchParams.has(\"hash\")?e.searchParams.get(\"hash\"):Yt(Jt(y.prototype),\"platformPayload\",this)}},{key:\"deviceType\",get:function(){switch($t(this,er)){case\"html5_ios\":case\"html5_android\":case\"html5_mobile\":return c.MOBILE;case\"web\":return c.DESKTOP;default:return Yt(Jt(y.prototype),\"deviceType\",this)}}},{key:\"isPlayerAuthorizationSupported\",get:function(){return!0}},{key:\"isPlayerAuthorized\",get:function(){return!0}},{key:\"isInviteFriendsSupported\",get:function(){return!0}},{key:\"isJoinCommunitySupported\",get:function(){return!0}},{key:\"isShareSupported\",get:function(){return!0}},{key:\"isCreatePostSupported\",get:function(){return!0}},{key:\"isAddToHomeScreenSupported\",get:function(){return\"html5_android\"===$t(this,er)}},{key:\"isAddToFavoritesSupported\",get:function(){return!0}},{key:\"isExternalLinksAllowed\",get:function(){return!0}},{key:\"isLeaderboardSupported\",get:function(){return!0}},{key:\"isLeaderboardNativePopupSupported\",get:function(){return this.deviceType===c.MOBILE}},{key:\"initialize\",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r,n,o=this._getPromiseDecorator(f.INITIALIZE);if(!o){o=this._createPromiseDecorator(f.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has(\"platform\")&&(t=this,r=er,n=i.searchParams.get(\"platform\"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(t,Qt(t,r,\"set\"),n)),zt(\"https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js\").then((function(){Ht(\"vkBridge\").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send(\"VKWebAppInit\").then((function(){e._isBannerSupported=!0,e._platformSdk.send(\"VKWebAppGetUserInfo\").then((function(t){t&&(e._playerId=t.id,e._playerName=\"\".concat(t.first_name,\" \").concat(t.last_name),t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=u.PLATFORM_INTERNAL,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))}return o.promise}},{key:\"authorizePlayer\",value:function(){return Promise.resolve()}},{key:\"isStorageSupported\",value:function(e){return e===u.PLATFORM_INTERNAL||Yt(Jt(y.prototype),\"isStorageSupported\",this).call(this,e)}},{key:\"isStorageAvailable\",value:function(e){return e===u.PLATFORM_INTERNAL||Yt(Jt(y.prototype),\"isStorageAvailable\",this).call(this,e)}},{key:\"getDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){var o=Array.isArray(e)?e:[e];r._platformSdk.send(\"VKWebAppStorageGet\",{keys:o}).then((function(r){if(Array.isArray(e)){var n=[];return o.forEach((function(e){var t=r.keys.findIndex((function(t){return t.key===e}));if(t<0)n.push(null);else if(\"\"!==r.keys[t].value){var o;try{o=JSON.parse(r.keys[t].value)}catch(e){o=r.keys[t].value}n.push(o)}else n.push(null)})),void t(n)}if(\"\"!==r.keys[0].value){var i;try{i=JSON.parse(r.keys[0].value)}catch(e){i=r.keys[0].value}t(i)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?n(e.error_data.error_reason):n()}))})):Yt(Jt(y.prototype),\"getDataFromStorage\",this).call(this,e,t)}},{key:\"setDataToStorage\",value:function(e,t,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};\"string\"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),o.push(this._platformSdk.send(\"VKWebAppStorageSet\",a))}return Promise.all(o)}var s={key:e,value:t};return\"string\"!=typeof t&&(s.value=JSON.stringify(t)),new Promise((function(e,t){n._platformSdk.send(\"VKWebAppStorageSet\",s).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return Yt(Jt(y.prototype),\"setDataToStorage\",this).call(this,e,t,r)}},{key:\"deleteDataFromStorage\",value:function(e,t){if(t===u.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this.setDataToStorage(e[n],\"\",t));return Promise.all(r)}return this.setDataToStorage(e,\"\",t)}return Yt(Jt(y.prototype),\"deleteDataFromStorage\",this).call(this,e,t)}},{key:\"showBanner\",value:function(e){var t=this,r=\"bottom\",n=\"resize\",o=!1;e&&(\"string\"==typeof e.position&&(r=e.position),\"string\"==typeof e.layoutType&&(n=e.layoutType),\"boolean\"==typeof e.canClose&&(o=e.canClose)),this._platformSdk.send(\"VKWebAppShowBannerAd\",{banner_location:r,layout_type:n,can_close:o}).then((function(e){e.result?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:\"hideBanner\",value:function(){var e=this;this._platformSdk.send(\"VKWebAppHideBannerAd\").then((function(t){t.result&&e._setBannerState(s.HIDDEN)}))}},{key:\"showInterstitial\",value:function(){var e=this;this._platformSdk.send(\"VKWebAppCheckNativeAds\",{ad_format:\"interstitial\"}).then((function(t){t.result&&e._setInterstitialState(i.OPENED)})).finally((function(){e._platformSdk.send(\"VKWebAppShowNativeAds\",{ad_format:\"interstitial\"}).then((function(t){e._setInterstitialState(t.result?i.CLOSED:i.FAILED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}))}},{key:\"showRewarded\",value:function(){var e=this;this._platformSdk.send(\"VKWebAppCheckNativeAds\",{ad_format:\"reward\",use_waterfall:!0}).then((function(t){t.result&&e._setRewardedState(a.OPENED)})).finally((function(){e._platformSdk.send(\"VKWebAppShowNativeAds\",{ad_format:\"reward\",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}))}},{key:\"inviteFriends\",value:function(){return Xt(this,tr,rr).call(this,f.INVITE_FRIENDS,\"VKWebAppShowInviteBox\",{},\"success\")}},{key:\"joinCommunity\",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return\"string\"==typeof t&&(t=parseInt(t,10),Number.isNaN(t))?Promise.reject():Xt(this,tr,rr).call(this,f.JOIN_COMMUNITY,\"VKWebAppJoinGroup\",{group_id:t}).then((function(){window.open(\"https://vk.com/public\".concat(t))}))}},{key:\"share\",value:function(e){var t={};return e&&e.link&&(t.link=e.link),Xt(this,tr,rr).call(this,f.SHARE,\"VKWebAppShare\",t,\"type\")}},{key:\"createPost\",value:function(e){var t={};return e&&e.message&&(t.message=e.message),e&&e.attachments&&(t.attachments=e.attachments),Xt(this,tr,rr).call(this,f.CREATE_POST,\"VKWebAppShowWallPostBox\",t,\"post_id\")}},{key:\"addToHomeScreen\",value:function(){return this.isAddToHomeScreenSupported?Xt(this,tr,rr).call(this,f.ADD_TO_HOME_SCREEN,\"VKWebAppAddToHomeScreen\"):Promise.reject()}},{key:\"addToFavorites\",value:function(){return Xt(this,tr,rr).call(this,f.ADD_TO_FAVORITES,\"VKWebAppAddToFavorites\")}},{key:\"showLeaderboardNativePopup\",value:function(e){if(!this.isLeaderboardNativePopupSupported)return Promise.reject();if(!e||!e.userResult)return Promise.reject();var t={user_result:e.userResult};return\"boolean\"==typeof e.global&&(t.global=e.global?1:0),Xt(this,tr,rr).call(this,f.SHOW_LEADERBOARD_NATIVE_POPUP,\"VKWebAppShowLeaderBoardBox\",t)}},{key:\"clipboardWrite\",value:function(e){return Xt(this,tr,rr).call(this,f.CLIPBOARD_WRITE,\"VKWebAppCopyText\",{text:e})}}])&&xt(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),y}(Wt);function or(e){return or=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},or(e)}function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=ur(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,ur(n.key),n)}}function ur(e){var t=function(e,t){if(\"object\"!=or(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=or(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==or(t)?t:String(t)}function cr(){return cr=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},cr.apply(this,arguments)}function lr(e,t){return lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lr(e,t)}function fr(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function pr(e){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pr(e)}function yr(e,t,r){dr(e,t),t.set(e,r)}function dr(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}function hr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(e,_r(e,t,\"set\"),r),r}function mr(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}function vr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_r(e,t,\"get\"))}function _r(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}var br=new WeakMap,gr=new WeakMap,Sr=new WeakMap,wr=new WeakMap,Pr=new WeakSet;function Er(e){var t=this;return new Promise((function(r){var n={scopes:!1};e&&\"boolean\"==typeof e.scopes&&(n.scopes=e.scopes),t._platformSdk.getPlayer(n).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized=\"lite\"!==e.getMode(),t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE;var r=e.getName();\"\"!==r&&(t._playerName=r),t._playerPhotos=[];var n=e.getPhoto(\"small\"),o=e.getPhoto(\"medium\"),i=e.getPhoto(\"large\");n&&t._playerPhotos.push(n),o&&t._playerPhotos.push(o),i&&t._playerPhotos.push(i),hr(t,gr,e)})).finally((function(){r()}))}))}const Ar=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&lr(e,t)}(d,t);var r,n,o,p,y=(o=d,p=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pr(o);if(p){var r=pr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===or(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return fr(e)}(this,e)});function d(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,d);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return dr(t=fr(e=y.call.apply(y,[this].concat(o))),r=Pr),r.add(t),yr(fr(e),br,{writable:!0,value:!1}),yr(fr(e),gr,{writable:!0,value:null}),yr(fr(e),Sr,{writable:!0,value:null}),yr(fr(e),wr,{writable:!0,value:null}),e}return r=d,(n=[{key:\"platformId\",get:function(){return e.YANDEX}},{key:\"platformLanguage\",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():cr(pr(d.prototype),\"platformLanguage\",this)}},{key:\"platformTld\",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():cr(pr(d.prototype),\"platformTld\",this)}},{key:\"deviceType\",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case c.DESKTOP:return c.DESKTOP;case c.MOBILE:return c.MOBILE;case c.TABLET:return c.TABLET;case c.TV:return c.TV;default:return cr(pr(d.prototype),\"deviceType\",this)}}},{key:\"isPlayerAuthorizationSupported\",get:function(){return!0}},{key:\"isAddToHomeScreenSupported\",get:function(){return vr(this,br)}},{key:\"isRateSupported\",get:function(){return!0}},{key:\"isLeaderboardSupported\",get:function(){return!0}},{key:\"isLeaderboardMultipleBoardsSupported\",get:function(){return!0}},{key:\"isLeaderboardSetScoreSupported\",get:function(){return!0}},{key:\"isLeaderboardGetScoreSupported\",get:function(){return!0}},{key:\"isLeaderboardGetEntriesSupported\",get:function(){return!0}},{key:\"isPaymentsSupported\",get:function(){return!0}},{key:\"isRemoteConfigSupported\",get:function(){return!0}},{key:\"initialize\",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),zt(\"/sdk.js\").then((function(){Ht(\"YaGames\",\"init\").then((function(){window.YaGames.init().then((function(t){var r;e._platformSdk=t;var n=mr(e,Pr,Er).call(e),o=null===(r=e._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:\"\",engineVersion:\"\",pluginName:\"instant-games-bridge\",pluginVersion:\"1.14.0\"}),i=e._platformSdk.shortcut.canShowPrompt().then((function(t){hr(e,br,t.canShow)})),a=new Promise((function(e){setTimeout(e,1e3)})),u=Promise.race([i,a]),c=e._platformSdk.getLeaderboards().then((function(t){hr(e,Sr,t)})),l=e._platformSdk.getPayments().then((function(t){hr(e,wr,t)}));e._isBannerSupported=!0;var p=e._platformSdk.adv.getBannerAdvStatus().then((function(t){t.stickyAdvIsShowing&&e._setBannerState(s.SHOWN)}));Promise.all([n,o,u,c,l,p]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))),t.promise}},{key:\"sendMessage\",value:function(e){switch(e){case l.GAME_READY:var t;return null===(t=this._platformSdk.features.LoadingAPI)||void 0===t||t.ready(),Promise.resolve();case l.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case l.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return cr(pr(d.prototype),\"sendMessage\",this).call(this,e)}}},{key:\"getServerTime\",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.serverTime())}))}},{key:\"authorizePlayer\",value:function(e){var t=this,r=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._isPlayerAuthorized?mr(this,Pr,Er).call(this,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)})):this._platformSdk.auth.openAuthDialog().then((function(){mr(t,Pr,Er).call(t,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:\"isStorageSupported\",value:function(e){return e===u.PLATFORM_INTERNAL||cr(pr(d.prototype),\"isStorageSupported\",this).call(this,e)}},{key:\"isStorageAvailable\",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:cr(pr(d.prototype),\"isStorageAvailable\",this).call(this,e)}},{key:\"getDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(t,n){if(r._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])}else vr(r,gr)?vr(r,gr).getData().then((function(n){if(r._platformStorageCachedData=n,Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];o.push(a)}t(o)}else t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])})).catch((function(e){n(e)})):n()})):Promise.reject():cr(pr(d.prototype),\"getDataFromStorage\",this).call(this,e,t)}},{key:\"setDataToStorage\",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){if(vr(n,gr)){var i=null!==n._platformStorageCachedData?ar({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;vr(n,gr).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))}else o()})):cr(pr(d.prototype),\"setDataToStorage\",this).call(this,e,t,r)}},{key:\"deleteDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){if(vr(r,gr)){var o=null!==r._platformStorageCachedData?ar({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];vr(r,gr).setData(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}else n()})):cr(pr(d.prototype),\"deleteDataFromStorage\",this).call(this,e,t)}},{key:\"showBanner\",value:function(){var e=this;this._platformSdk.adv.showBannerAdv().then((function(t){t.stickyAdvIsShowing?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:\"hideBanner\",value:function(){var e=this;this._platformSdk.adv.hideBannerAdv().then((function(t){t.stickyAdvIsShowing||e._setBannerState(s.HIDDEN)}))}},{key:\"showInterstitial\",value:function(){var e=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._setInterstitialState(i.OPENED)},onClose:function(t){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)},onError:function(e){console.error(e)}}})}},{key:\"showRewarded\",value:function(){var e=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}}})}},{key:\"checkAdBlock\",value:function(){return new Promise((function(e){e(!1)}))}},{key:\"addToHomeScreen\",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(f.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(f.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(t){\"accepted\"!==t.outcome?e._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN):e._resolvePromiseDecorator(f.ADD_TO_HOME_SCREEN)})).catch((function(t){e._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN,t)}))),t.promise}},{key:\"rate\",value:function(){var e=this,t=this._getPromiseDecorator(f.RATE);return t||(t=this._createPromiseDecorator(f.RATE),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(f.RATE):e._rejectPromiseDecorator(f.RATE)})).catch((function(t){e._rejectPromiseDecorator(f.RATE,t)})):e._rejectPromiseDecorator(f.RATE,t.reason)})).catch((function(t){e._rejectPromiseDecorator(f.RATE,t)}))),t.promise}},{key:\"setLeaderboardScore\",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!(vr(this,Sr)&&e&&e.score&&e.leaderboardName))return Promise.reject();var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE),\"string\"==typeof e.score&&(e.score=parseInt(e.score,10)),vr(this,Sr).setLeaderboardScore(e.leaderboardName,e.score).then((function(){t._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE)})).catch((function(e){t._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:\"getLeaderboardScore\",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!vr(this,Sr)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_SCORE),vr(this,Sr).getLeaderboardPlayerEntry(e.leaderboardName).then((function(e){t._resolvePromiseDecorator(f.GET_LEADERBOARD_SCORE,e.score)})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:\"getLeaderboardEntries\",value:function(e){var t=this;if(!vr(this,Sr)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);if(!r){r=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);var n={includeUser:!1,quantityAround:5,quantityTop:5};\"boolean\"==typeof e.includeUser&&(n.includeUser=e.includeUser),\"string\"==typeof e.quantityAround&&(e.quantityAround=parseInt(e.quantityAround,10)),\"number\"==typeof e.quantityAround&&(n.quantityAround=e.quantityAround),\"string\"==typeof e.quantityTop&&(e.quantityTop=parseInt(e.quantityTop,10)),\"number\"==typeof e.quantityTop&&(n.quantityTop=e.quantityTop),vr(this,Sr).getLeaderboardEntries(e.leaderboardName,n).then((function(e){var r=null;e&&e.entries.length>0&&(r=e.entries.map((function(e){var t=[],r=e.player.getAvatarSrc(\"small\"),n=e.player.getAvatarSrc(\"medium\"),o=e.player.getAvatarSrc(\"large\");return r&&t.push(r),n&&t.push(n),o&&t.push(o),{id:e.player.uniqueID,score:e.score,rank:e.rank,name:e.player.publicName,photos:t}}))),t._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_ENTRIES,e)}))}return r.promise}},{key:\"purchase\",value:function(e){var t=this;if(!vr(this,wr)||!e.id)return Promise.reject();var r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),vr(this,wr).purchase(e).then((function(e){t._resolvePromiseDecorator(f.PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.PURCHASE,e)}))),r.promise}},{key:\"getPaymentsPurchases\",value:function(){var e=this;if(!vr(this,wr))return Promise.reject();var t=this._getPromiseDecorator(f.GET_PURCHASES);return t||(t=this._createPromiseDecorator(f.GET_PURCHASES),vr(this,wr).getPurchases().then((function(t){e._resolvePromiseDecorator(f.GET_PURCHASES,t)})).catch((function(t){e._rejectPromiseDecorator(f.GET_PURCHASES,t)}))),t.promise}},{key:\"getPaymentsCatalog\",value:function(){var e=this;if(!vr(this,wr))return Promise.reject();var t=this._getPromiseDecorator(f.GET_CATALOG);return t||(t=this._createPromiseDecorator(f.GET_CATALOG),vr(this,wr).getCatalog().then((function(t){e._resolvePromiseDecorator(f.GET_CATALOG,t)})).catch((function(t){e._rejectPromiseDecorator(f.GET_CATALOG,t)}))),t.promise}},{key:\"consumePurchase\",value:function(e){var t=this;if(!vr(this,wr)||!e.purchaseToken)return Promise.reject();var r=this._getPromiseDecorator(f.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(f.CONSUME_PURCHASE),vr(this,wr).consumePurchase(e.purchaseToken).then((function(e){t._resolvePromiseDecorator(f.CONSUME_PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.CONSUME_PURCHASE,e)}))),r.promise}},{key:\"getRemoteConfig\",value:function(e){var t=this;if(!this._platformSdk)return Promise.reject();if(e&&(null==e||!e.defaultFlags)&&(null==e||!e.clientFeatures))return Promise.reject();var r=this._getPromiseDecorator(f.GET_REMOTE_CONFIG);return r||(r=this._createPromiseDecorator(f.GET_REMOTE_CONFIG),(e?this._platformSdk.getFlags(e):this._platformSdk.getFlags()).then((function(e){t._resolvePromiseDecorator(f.GET_REMOTE_CONFIG,e)})).catch((function(e){t._rejectPromiseDecorator(f.GET_REMOTE_CONFIG,e)}))),r.promise}},{key:\"clipboardWrite\",value:function(e){var t=this,r=this._getPromiseDecorator(f.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(f.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(e).then((function(){t._resolvePromiseDecorator(f.CLIPBOARD_WRITE,!0)})).catch((function(e){t._rejectPromiseDecorator(f.CLIPBOARD_WRITE,e)}))),r.promise}}])&&sr(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),d}(Wt);class Or extends Error{}function kr(e){return kr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},kr(e)}function Tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,Dr(n.key),n)}}function Dr(e){var t=function(e,t){if(\"object\"!=kr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=kr(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==kr(t)?t:String(t)}function Ir(){return Ir=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ir.apply(this,arguments)}function Rr(e,t){return Rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rr(e,t)}function jr(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Lr(e){return Lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lr(e)}function Nr(e,t,r){Cr(e,t),t.set(e,r)}function Cr(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}function Br(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}function Mr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(e,Gr(e,t,\"set\"),r),r}function Fr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Gr(e,t,\"get\"))}function Gr(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}Or.prototype.name=\"InvalidTokenError\";var Wr=new WeakMap,zr=new WeakMap,Hr=new WeakMap,Ur=new WeakSet;function xr(){var e=this;return Fr(this,zr)?new Promise((function(t,r){e._platformSdk.user.getUserToken().then((function(r){var n=function(e,t){if(\"string\"!=typeof e)throw new Or(\"Invalid token specified: must be a string\");t||(t={});const r=!0===t.header?0:1,n=e.split(\".\")[r];if(\"string\"!=typeof n)throw new Or(`Invalid token specified: missing part #${r+1}`);let o;try{o=function(e){let t=e.replace(/-/g,\"+\").replace(/_/g,\"/\");switch(t.length%4){case 0:break;case 2:t+=\"==\";break;case 3:t+=\"=\";break;default:throw new Error(\"base64 string is not of the correct length\")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r=\"0\"+r),\"%\"+r})))}(t)}catch(e){return atob(t)}}(n)}catch(e){throw new Or(`Invalid token specified: invalid base64 for part #${r+1} (${e.message})`)}try{return JSON.parse(o)}catch(e){throw new Or(`Invalid token specified: invalid json for part #${r+1} (${e.message})`)}}(r);e._isPlayerAuthorized=!0,e._defaultStorageType=u.PLATFORM_INTERNAL,n.userId&&(e._playerId=n.userId),n.username&&(e._playerName=n.username),n.profilePictureUrl&&(e._playerPhotos=[n.profilePictureUrl]),t()})).catch((function(e){r(e)}))})):Promise.reject()}const Vr=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Rr(e,t)}(d,t);var r,n,o,p,y=(o=d,p=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Lr(o);if(p){var r=Lr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===kr(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return jr(e)}(this,e)});function d(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,d);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return Cr(t=jr(e=y.call.apply(y,[this].concat(o))),r=Ur),r.add(t),Nr(jr(e),Wr,{writable:!0,value:!1}),Nr(jr(e),zr,{writable:!0,value:!1}),Nr(jr(e),Hr,{writable:!0,value:{adStarted:function(){Fr(jr(e),Wr)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED)},adFinished:function(){Fr(jr(e),Wr)?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setInterstitialState(i.CLOSED)},adError:function(){Fr(jr(e),Wr)?e._setRewardedState(a.FAILED):e._setInterstitialState(i.FAILED)}}}),e}return r=d,(n=[{key:\"platformId\",get:function(){return e.CRAZY_GAMES}},{key:\"platformLanguage\",get:function(){return Fr(this,zr)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():Ir(Lr(d.prototype),\"platformLanguage\",this)}},{key:\"isPlayerAuthorizationSupported\",get:function(){return Fr(this,zr)}},{key:\"deviceType\",get:function(){if(Fr(this,zr)){var e=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([c.DESKTOP,c.MOBILE,c.TABLET].includes(e))return e}return Ir(Lr(d.prototype),\"deviceType\",this)}},{key:\"isExternalLinksAllowed\",get:function(){return!0}},{key:\"initialize\",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),zt(\"https://sdk.crazygames.com/crazygames-sdk-v3.js\").then((function(){Ht(\"CrazyGames\",\"SDK\",\"init\").then((function(){e._platformSdk=window.CrazyGames.SDK,e._defaultStorageType=u.LOCAL_STORAGE,e._isBannerSupported=!0,e._platformSdk.init().then((function(){Mr(e,zr,e._platformSdk.user.isUserAccountAvailable);var t=Br(e,Ur,xr).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))),t.promise}},{key:\"authorizePlayer\",value:function(){var e=this;if(!Fr(this,zr))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){Br(e,Ur,xr).call(e).then((function(){e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:\"sendMessage\",value:function(e){switch(e){case l.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case l.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case l.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case l.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case l.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return Ir(Lr(d.prototype),\"sendMessage\",this).call(this,e)}}},{key:\"isStorageSupported\",value:function(e){return e===u.PLATFORM_INTERNAL||Ir(Lr(d.prototype),\"isStorageSupported\",this).call(this,e)}},{key:\"isStorageAvailable\",value:function(e){return e===u.PLATFORM_INTERNAL||Ir(Lr(d.prototype),\"isStorageAvailable\",this).call(this,e)}},{key:\"getDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t){if(Array.isArray(e)){var n=[];e.forEach((function(e){var t=r._platformSdk.data.getItem(e);try{t=JSON.parse(t)}catch(e){}n.push(t)})),t(n)}var o=r._platformSdk.data.getItem(e);try{o=JSON.parse(o)}catch(e){}t(o)})):Ir(Lr(d.prototype),\"getDataFromStorage\",this).call(this,e,t)}},{key:\"setDataToStorage\",value:function(e,t,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=t[i];\"string\"!=typeof t[i]&&(a=JSON.stringify(t[i])),o.push(this._platformSdk.data.setItem(e[i],a))}return Promise.all(o)}var s=t;return\"string\"!=typeof t&&(s=JSON.stringify(t)),new Promise((function(t,r){n._platformSdk.data.setItem(e,s).then((function(){t()})).catch((function(e){r(e)}))}))}return Ir(Lr(d.prototype),\"setDataToStorage\",this).call(this,e,t,r)}},{key:\"deleteDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?Array.isArray(e)?(e.forEach((function(e){return r._platformSdk.data.removeItem(e)})),Promise.resolve()):(this._platformSdk.data.removeItem(e),Promise.resolve()):Ir(Lr(d.prototype),\"deleteDataFromStorage\",this).call(this,e,t)}},{key:\"showBanner\",value:function(e){var t=this;e&&e.containerId&&\"string\"==typeof e.containerId?this._platformSdk.banner.requestResponsiveBanner([e.containerId]).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED)})):this._setBannerState(s.FAILED)}},{key:\"hideBanner\",value:function(){this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:\"showInterstitial\",value:function(){Mr(this,Wr,!1),this._platformSdk.ad.requestAd(\"midgame\",Fr(this,Hr))}},{key:\"showRewarded\",value:function(){Mr(this,Wr,!0),this._platformSdk.ad.requestAd(\"rewarded\",Fr(this,Hr))}},{key:\"checkAdBlock\",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ad.hasAdblock().then((function(e){t(e)}))}))}}])&&Tr(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),d}(Wt);function Yr(e){return Yr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Yr(e)}function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=qr(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,qr(n.key),n)}}function qr(e){var t=function(e,t){if(\"object\"!=Yr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=Yr(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==Yr(t)?t:String(t)}function Xr(){return Xr=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=en(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Xr.apply(this,arguments)}function $r(e,t){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$r(e,t)}function Qr(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function en(e){return en=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},en(e)}var tn=new WeakSet;function rn(){var e=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized=\"false\"===this._platformSdk.options.guest,new Promise((function(t){e._platformSdk.getUsers([e._playerId],(function(r){if(r&&1===r.length){var n=r[0];e._playerName=n.full_name,\"\"!==n.avatar&&(e._playerPhotos=[n.avatar])}t()}))}))}const nn=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&$r(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=en(o);if(s){var r=en(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===Yr(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return Qr(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}(t=Qr(e=c.call.apply(c,[this].concat(o))),r=tn),r.add(t),e}return r=l,(n=[{key:\"platformId\",get:function(){return e.ABSOLUTE_GAMES}},{key:\"isPlayerAuthorizationSupported\",get:function(){return!0}},{key:\"initialize\",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),zt(\"https://unpkg.com/@agru/sdk/dist/umd/index.min.js\").then((function(){e._platformSdk=new window.AgRuSdk,e._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(t,r){\"rewarded\"===t.type?null===r?t.status?e._setRewardedState(a.OPENED):(t.reward&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED):null===r?t.status?e._setInterstitialState(i.OPENED):e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)}));var t=function(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}(e,tn,rn).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,e._resolvePromiseDecorator(f.INITIALIZE)}))}))),t.promise}},{key:\"authorizePlayer\",value:function(){var e=this;if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(t,r){null===r?e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER):e._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,r)}))),t.promise}},{key:\"isStorageSupported\",value:function(e){return e===u.PLATFORM_INTERNAL||Xr(en(l.prototype),\"isStorageSupported\",this).call(this,e)}},{key:\"isStorageAvailable\",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Xr(en(l.prototype),\"isStorageAvailable\",this).call(this,e)}},{key:\"getDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])}else r._isPlayerAuthorized?r._platformSdk.getSaveData((function(o,i){if(null===i){if(r._platformStorageCachedData=o||{},Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var u=void 0===r._platformStorageCachedData[e[s]]?null:r._platformStorageCachedData[e[s]];a.push(u)}return void t(a)}t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])}else n(i)})):n()})):Xr(en(l.prototype),\"getDataFromStorage\",this).call(this,e,t)}},{key:\"setDataToStorage\",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?Kr({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.setSaveData(i,(function(e,t){null===t&&(n._platformStorageCachedData=i,r()),o(t)}))}else o()})):Xr(en(l.prototype),\"setDataToStorage\",this).call(this,e,t,r)}},{key:\"deleteDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?Kr({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.setSaveData(o,(function(e,i){null===i&&(r._platformStorageCachedData=o,t()),n(i)}))}else n()})):Xr(en(l.prototype),\"deleteDataFromStorage\",this).call(this,e,t)}},{key:\"showInterstitial\",value:function(){this._platformSdk.showCampaign(\"default\")}},{key:\"showRewarded\",value:function(){this._platformSdk.showCampaign(\"rewarded\")}}])&&Jr(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),l}(Wt);function on(e){return on=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},on(e)}function an(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,sn(n.key),n)}}function sn(e){var t=function(e,t){if(\"object\"!=on(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=on(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==on(t)?t:String(t)}function un(e,t){return un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},un(e,t)}function cn(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function ln(e){return ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ln(e)}function fn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(e,yn(e,t,\"set\"),r),r}function pn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,yn(e,t,\"get\"))}function yn(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}var dn=new WeakMap;const hn=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&un(e,t)}(p,t);var r,n,o,c,l=(o=p,c=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ln(o);if(c){var r=ln(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===on(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return cn(e)}(this,e)});function p(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=cn(e=l.call.apply(l,[this].concat(i))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}(t,r=dn),r.set(t,n),e}return r=p,(n=[{key:\"platformId\",get:function(){return e.GAME_DISTRIBUTION}},{key:\"initialize\",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(f.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(f.INITIALIZE),this._options&&\"string\"==typeof this._options.gameId){var t=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(e){switch(e.name){case\"SDK_READY\":t._platformSdk=window.gdsdk,t._platformSdk.preloadAd(\"rewarded\"),t._isInitialized=!0,t._resolvePromiseDecorator(f.INITIALIZE);break;case\"SDK_GAME_START\":pn(t,dn)?t._setRewardedState(a.CLOSED):t._setInterstitialState(i.CLOSED);break;case\"SDK_GAME_PAUSE\":pn(t,dn)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED);break;case\"SDK_REWARDED_WATCH_COMPLETE\":t._setRewardedState(a.REWARDED)}}},this._defaultStorageType=u.LOCAL_STORAGE,this._isBannerSupported=!0,zt(\"https://html5.api.gamedistribution.com/main.min.js\")}else this._rejectPromiseDecorator(f.INITIALIZE,h);return e.promise}},{key:\"showBanner\",value:function(e){var t=this;e&&e.containerId&&\"string\"==typeof e.containerId?this._platformSdk.showAd(\"display\",{containerId:e.containerId}).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED)})):this._setBannerState(s.FAILED)}},{key:\"hideBanner\",value:function(){this._setBannerState(s.HIDDEN)}},{key:\"showInterstitial\",value:function(){var e=this;fn(this,dn,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){e._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:\"showRewarded\",value:function(){var e=this;fn(this,dn,!0),this._platformSdk?this._platformSdk.showAd(\"rewarded\").catch((function(){e._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&an(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),p}(Wt);function mn(e){return mn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},mn(e)}function vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,_n(n.key),n)}}function _n(e){var t=function(e,t){if(\"object\"!=mn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=mn(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==mn(t)?t:String(t)}function bn(e,t){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bn(e,t)}function gn(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Sn(e){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sn(e)}function wn(e,t){Pn(e,t),t.add(e)}function Pn(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}function En(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,On(e,t,\"get\"))}function An(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(e,On(e,t,\"set\"),r),r}function On(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}function kn(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}var Tn=new WeakMap,Dn=new WeakSet,In=new WeakSet,Rn=new WeakSet,jn=new WeakSet,Ln=new WeakSet,Nn=new WeakSet;function Cn(e){var t=e.code&&\"AdsNotFound\"===e.code;switch(e.type){case\"adCompleted\":En(this,Tn)?(this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED)):this._setInterstitialState(i.CLOSED);break;case\"adError\":En(this,Tn)?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED);break;case\"adDismissed\":En(this,Tn)?this._setRewardedState(t?a.FAILED:a.CLOSED):this._setInterstitialState(t?i.FAILED:i.CLOSED)}}function Bn(e){e&&\"ok\"===e.status&&(this._isPlayerAuthorized=2===e.loginStatus||3===e.loginStatus),this._isPlayerAuthorized?this._platformSdk.userProfile():(this._isInitialized=!0,this._resolvePromiseDecorator(f.INITIALIZE))}function Mn(e){\"ok\"===e.status&&(this._playerId=e.uid,this._playerName=e.nick,this._playerPhotos=[e.avatar]),this._isInitialized=!0,this._resolvePromiseDecorator(f.INITIALIZE)}function Fn(e){\"ok\"===e.status?(this._resolvePromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.reloadWindow()):this._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,e.errmsg)}function Gn(e){0!==(null==e?void 0:e.length)?this._resolvePromiseDecorator(f.GET_CATALOG,e):this._rejectPromiseDecorator(f.GET_CATALOG)}function Wn(e){e&&e.uid?this._resolvePromiseDecorator(f.PURCHASE,e.uid):this._rejectPromiseDecorator(f.PURCHASE)}const zn=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&bn(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sn(o);if(s){var r=Sn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===mn(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return gn(e)}(this,e)});function c(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,c);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return wn(gn(e=u.call.apply(u,[this].concat(i))),Nn),wn(gn(e),Ln),wn(gn(e),jn),wn(gn(e),Rn),wn(gn(e),In),wn(gn(e),Dn),n={writable:!0,value:!1},Pn(t=gn(e),r=Tn),r.set(t,n),e}return r=c,(n=[{key:\"platformId\",get:function(){return e.VK_PLAY}},{key:\"isPlayerAuthorizationSupported\",get:function(){return!0}},{key:\"isClipboardSupported\",get:function(){return!1}},{key:\"initialize\",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(f.INITIALIZE),this._options&&this._options.gameId){var r=this._options.gameId,n={appid:r,userProfileCallback:function(t){return kn(e,Rn,Mn).call(e,t)},getLoginStatusCallback:function(t){return kn(e,In,Bn).call(e,t)},registerUserCallback:function(t){return kn(e,jn,Fn).call(e,t)},adsCallback:function(t){return kn(e,Dn,Cn).call(e,t)},getGameInventoryItemsCallback:function(t){return kn(e,Ln,Gn).call(e,t)},paymentReceivedCallback:function(t){return kn(e,Nn,Wn).call(e,t)}};zt(\"https://vkplay.ru/app/\".concat(r,\"/static/mailru.core.js\")).then((function(){Ht(\"iframeApi\").then((function(){window.iframeApi(n).then((function(t){e._platformSdk=t,e._platformSdk.getLoginStatus()}))}))}))}else this._rejectPromiseDecorator(f.INITIALIZE,m);return t.promise}},{key:\"showInterstitial\",value:function(){var e=this;An(this,Tn,!1),this._platformSdk.showAds({interstitial:!0}).then((function(){e._setInterstitialState(i.OPENED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}},{key:\"showRewarded\",value:function(){var e=this;An(this,Tn,!0),this._platformSdk.showAds({interstitial:!1}).then((function(){e._setRewardedState(a.OPENED)})).catch((function(){e._setRewardedState(a.FAILED)}))}},{key:\"authorizePlayer\",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.registerUser()),e}},{key:\"getPaymentsCatalog\",value:function(){var e=this._getPromiseDecorator(f.GET_CATALOG);return e||(e=this._createPromiseDecorator(f.GET_CATALOG),this._platformSdk.getGameInventoryItems()),e.promise}},{key:\"purchase\",value:function(e){if(!e)return Promise.reject();var t=this._getPromiseDecorator(f.PURCHASE);return t||(t=this._createPromiseDecorator(f.PURCHASE),this._platformSdk.paymentFrameItem(e)),t.promise}}])&&vn(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),c}(Wt);function Hn(e){return Hn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Hn(e)}function Un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(r),!0).forEach((function(t){Qn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,eo(n.key),n)}}function Yn(){return Yn=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Yn.apply(this,arguments)}function Zn(e,t){return Zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zn(e,t)}function Kn(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Jn(e){return Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jn(e)}function qn(e,t){$n(e,t),t.add(e)}function Xn(e,t,r){$n(e,t),t.set(e,r)}function $n(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}function Qn(e,t,r){return(t=eo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eo(e){var t=function(e,t){if(\"object\"!=Hn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=Hn(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==Hn(t)?t:String(t)}function to(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}function ro(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var no=\"AUTHORIZED\",oo={VALUABLE_ACCESS:\"VALUABLE_ACCESS\",PHOTO_CONTENT:\"PHOTO_CONTENT\"},io=new WeakMap,ao=new WeakMap,so=new WeakMap,uo=new WeakSet,co=new WeakSet,lo=new WeakSet,fo=new WeakSet,po=new WeakSet,yo=new WeakSet,ho=new WeakSet,mo=new WeakSet,vo=new WeakSet,_o=new WeakSet,bo=new WeakSet,go=new WeakSet,So=new WeakSet,wo=new WeakSet,Po=new WeakSet,Eo=new WeakSet;function Ao(){return{userProfile:{fields:\"uid,name,pic50x50,pic128x128,pic_base\",method:\"users.getCurrentUser\"},hasAppPermission:function(e){return{method:\"users.hasAppPermission\",ext_perm:e}}}}function Oo(){var e=this;return{userProfileCallback:function(t,r,n){return to(e,uo,To).call(e,t,r,n)},hasValueAccessCallback:function(t,r,n){return to(e,lo,Io).call(e,r,n)}}}function ko(){var e=this;return{showPermissions:function(){return to(e,fo,Ro).call(e)},loadAd:function(t){return to(e,po,jo).call(e,t)},showLoadedAd:function(t,r){return to(e,yo,Lo).call(e,r)},showAd:function(t,r){return to(e,ho,No).call(e,r)},requestBannerAds:function(t,r){return to(e,mo,Co).call(e,t,r)},showBannerAds:function(t,r){return to(e,_o,Mo).call(e,r)},hideBannerAds:function(t,r){return to(e,vo,Bo).call(e,r)},setBannerFormat:function(t){return to(e,bo,Fo).call(e,t)},showInvite:function(t){return to(e,go,Go).call(e,t)},showRatingDialog:function(t,r){return to(e,So,Wo).call(e,t,r)},joinGroup:function(t,r){return to(e,wo,zo).call(e,t,r)},showLoginSuggestion:function(t,r){return to(e,co,Do).call(e,t,r)},postMediatopic:function(t,r){return to(e,Po,Ho).call(e,t,r)},isAdBlockEnabled:function(t,r){return to(e,Eo,Uo).call(e,t,r)}}}function To(e,t){\"ok\"===e&&(this._playerId=t.uid,this._playerName=t.name,this._playerPhotos=[t.pic50x50,t.pic128x128,t.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(ro(this,io).hasAppPermission(oo.VALUABLE_ACCESS),ro(this,ao).hasValueAccessCallback)}function Do(e,t){if(\"error\"===e)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,t);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}function Io(e){if(this._hasValuableAccessPermission=!!e,this._defaultStorageType=this._hasValuableAccessPermission?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(f.INITIALIZE);else{var t=Object.values(oo).map((function(e){return'\"'.concat(e,'\"')})).join(\",\");this._platformSdk.UI.showPermissions(\"[\".concat(t,\"]\"))}}function Ro(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(ro(this,io).hasAppPermission(oo.VALUABLE_ACCESS),ro(this,ao).hasValueAccessCallback)}function jo(e){\"error\"===e?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function Lo(e){switch(e){case\"complete\":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case\"skip\":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function No(e){switch(e){case\"ready\":case\"ad_prepared\":break;case\"ad_shown\":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Co(e,t){if(\"error\"!==e)switch(t){case\"ad_loaded\":this._platformSdk.invokeUIMethod(\"showBannerAds\");break;case\"banner_shown\":case\"ad_shown\":this._setBannerState(s.SHOWN);break;case\"hidden_by_user\":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function Bo(e){e?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function Mo(e){e||this._setBannerState(s.FAILED)}function Fo(e){\"error\"===e?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function Go(e){\"error\"===e?this._rejectPromiseDecorator(f.INVITE_FRIENDS):this._resolvePromiseDecorator(f.INVITE_FRIENDS)}function Wo(e,t){\"error\"===e?this._rejectPromiseDecorator(f.RATE,t):this._resolvePromiseDecorator(f.RATE)}function zo(e,t){\"error\"===e?this._rejectPromiseDecorator(f.JOIN_COMMUNITY,t):this._resolvePromiseDecorator(f.JOIN_COMMUNITY)}function Ho(e,t){\"error\"===e?this._rejectPromiseDecorator(f.CREATE_POST,t):this._resolvePromiseDecorator(f.CREATE_POST)}function Uo(e,t){\"ok\"===e?this._resolvePromiseDecorator(f.ADBLOCK_DETECT,\"true\"===t):this._rejectPromiseDecorator(f.ADBLOCK_DETECT)}const xo=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Zn(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jn(o);if(s){var r=Jn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===Hn(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return Kn(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return qn(Kn(e=c.call.apply(c,[this].concat(r))),Eo),qn(Kn(e),Po),qn(Kn(e),wo),qn(Kn(e),So),qn(Kn(e),go),qn(Kn(e),bo),qn(Kn(e),_o),qn(Kn(e),vo),qn(Kn(e),mo),qn(Kn(e),ho),qn(Kn(e),yo),qn(Kn(e),po),qn(Kn(e),fo),qn(Kn(e),lo),qn(Kn(e),co),qn(Kn(e),uo),Xn(Kn(e),so,{get:ko,set:void 0}),Xn(Kn(e),ao,{get:Oo,set:void 0}),Xn(Kn(e),io,{get:Ao,set:void 0}),Qn(Kn(e),\"_hasValuableAccessPermission\",!1),Qn(Kn(e),\"_hasValuableAccessPermissionShowed\",!1),Qn(Kn(e),\"_platformBannerOptions\",{}),e}return r=l,(n=[{key:\"platformId\",get:function(){return e.OK}},{key:\"isPlayerAuthorizationSupported\",get:function(){return!0}},{key:\"isBannerSupported\",get:function(){return!0}},{key:\"isJoinCommunitySupported\",get:function(){return!0}},{key:\"isInviteFriendsSupported\",get:function(){return!0}},{key:\"isCreatePostSupported\",get:function(){return!0}},{key:\"isRateSupported\",get:function(){return!0}},{key:\"isClipboardSupported\",get:function(){return!1}},{key:\"initialize\",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),zt(\"//api.ok.ru/js/fapi5.js\").then((function(){Ht(\"FAPI\").then((function(){e._platformSdk=window.FAPI,window.API_callback=function(t,r,n){return ro(e,so)[t](r,n)};var t=e._platformSdk.Util.getRequestParameters()||{};t.api_server&&t.apiconnection?e._platformSdk.init(t.api_server,t.apiconnection,(function(){var t,r=null===(t=e._platformSdk)||void 0===t?void 0:t.saved_state;e._isPlayerAuthorized=!r||r===no,e._isPlayerAuthorized?e._platformSdk.Client.call(ro(e,io).userProfile,ro(e,ao).userProfileCallback):(e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE))}),(function(){e._rejectPromiseDecorator(f.INITIALIZE)})):e._rejectPromiseDecorator(f.INITIALIZE,v)}))}))),t.promise}},{key:\"authorizePlayer\",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(no)),e.promise}},{key:\"isStorageSupported\",value:function(e){return e===u.PLATFORM_INTERNAL||Yn(Jn(l.prototype),\"isStorageSupported\",this).call(this,e)}},{key:\"isStorageAvailable\",value:function(e){return e===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission:Yn(Jn(l.prototype),\"isStorageAvailable\",this).call(this,e)}},{key:\"getDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(t,n){var o=Array.isArray(e)?e:[e],i={method:\"storage.get\",keys:o,scope:\"CUSTOM\"};r._platformSdk.Client.call(i,(function(r,i,a){if(i){var s,u=i.data||{};if(Array.isArray(e)){var c=[];return o.forEach((function(e){if(\"\"!==u[e]&&void 0!==u[e]){var t;try{t=JSON.parse(u[e])}catch(r){t=u[e]}c.push(t)}else c.push(null)})),void t(c)}if(\"\"===u[e]||void 0===u[e])return void t(null);try{s=JSON.parse(u[e])}catch(t){s=u[e]}t(s)}else n(a)}))})):Promise.reject(d):Yn(Jn(l.prototype),\"getDataFromStorage\",this).call(this,e,t)}},{key:\"setDataToStorage\",value:function(e,t,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(d);for(var o=Array.isArray(e)?e:[e],i=Array.isArray(e)?t:[t],a=[],s=function(){var e=o[c],t=i[c];\"string\"!=typeof t&&(t=JSON.stringify(t));var r={method:\"storage.set\",key:e,value:t},s=new Promise((function(e,t){n._platformSdk.Client.call(r,(function(r,n){n?e():t()}))}));a.push(s)},c=0;c<o.length;c++)s();return Promise.all(a)}return Yn(Jn(l.prototype),\"setDataToStorage\",this).call(this,e,t,r)}},{key:\"deleteDataFromStorage\",value:function(e,t){var r=this;if(t===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(d);for(var n=Array.isArray(e)?e:[e],o=[],i=function(){var e={method:\"storage.set\",key:n[a]},t=new Promise((function(t,n){r._platformSdk.Client.call(e,(function(e,r){r?t():n()}))}));o.push(t)},a=0;a<n.length;a++)i();return Promise.all(o)}return Yn(Jn(l.prototype),\"deleteDataFromStorage\",this).call(this,e,t)}},{key:\"showInterstitial\",value:function(){try{this._platformSdk.UI.showAd()}catch(e){this._setInterstitialState(i.FAILED)}}},{key:\"showRewarded\",value:function(){try{this._platformSdk.UI.loadAd()}catch(e){this._setRewardedState(a.FAILED)}}},{key:\"showBanner\",value:function(e){if(e){if(\"string\"==typeof e.layoutType)return this._platformBannerOptions=xn(xn({},e),{},{layoutType:null}),void this._platformSdk.invokeUIMethod(\"setBannerFormat\",e.layoutType);if(\"string\"==typeof e.position)return void this._platformSdk.invokeUIMethod(\"requestBannerAds\",e.position)}this._platformSdk.invokeUIMethod(\"requestBannerAds\",\"bottom\")}},{key:\"hideBanner\",value:function(){this._platformSdk.invokeUIMethod(\"hideBannerAds\")}},{key:\"checkAdBlock\",value:function(){var e=this._getPromiseDecorator(f.ADBLOCK_DETECT);return e||(e=this._createPromiseDecorator(f.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod(\"isAdBlockEnabled\")),e.promise}},{key:\"inviteFriends\",value:function(e){var t=(e||{}).text;if(!e||\"string\"!=typeof t)return Promise.reject();var r=this._getPromiseDecorator(f.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(f.INVITE_FRIENDS),t.length>120?this._rejectPromiseDecorator(f.INVITE_FRIENDS,_):this._platformSdk.UI.showInvite(t)),r.promise}},{key:\"rate\",value:function(){var e=this._getPromiseDecorator(f.RATE);return e||(e=this._createPromiseDecorator(f.RATE),this._platformSdk.UI.showRatingDialog()),e.promise}},{key:\"createPost\",value:function(e){if(!e||null==e||!e.media)return Promise.reject();var t,r=this._getPromiseDecorator(f.CREATE_POST);return r||(r=this._createPromiseDecorator(f.CREATE_POST),this._platformSdk.UI.postMediatopic(e,null!==(t=e.status)&&void 0!==t&&t)),r.promise}},{key:\"joinCommunity\",value:function(e){if(!e||null==e||!e.groupId)return Promise.reject();var t,r=this._getPromiseDecorator(f.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(f.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(e.groupId,null!==(t=e.enableMessages)&&void 0!==t&&t)),r.promise}}])&&Vn(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),l}(Wt);function Vo(e){return Vo=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Vo(e)}function Yo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,Zo(n.key),n)}}function Zo(e){var t=function(e,t){if(\"object\"!=Vo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=Vo(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==Vo(t)?t:String(t)}function Ko(e,t){return Ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ko(e,t)}function Jo(e){return Jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jo(e)}const qo=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Ko(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jo(o);if(s){var r=Jo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===Vo(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,c),u.apply(this,arguments)}return r=c,(n=[{key:\"platformId\",get:function(){return e.PLAYGAMA}},{key:\"initialize\",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),zt(\"https://developer.playgama.com/sdk/v1.js\").then((function(){Ht(\"PLAYGAMA_SDK\").then((function(){e._platformSdk=window.PLAYGAMA_SDK,e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))),t.promise}},{key:\"showInterstitial\",value:function(){var e=this;this._platformSdk.advService.showInterstitial({onOpen:function(){e._setInterstitialState(i.OPENED)},onEmpty:function(){e._setInterstitialState(i.FAILED)},onClose:function(){e._setInterstitialState(i.CLOSED)},onError:function(){e._setInterstitialState(i.FAILED)}})}},{key:\"showRewarded\",value:function(){var e=this;this._platformSdk.advService.showRewarded({onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onEmpty:function(){e._setRewardedState(a.FAILED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}})}}])&&Yo(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),c}(Wt);function Xo(e){return Xo=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Xo(e)}function $o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,oi(n.key),n)}}function Qo(){return Qo=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ri(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Qo.apply(this,arguments)}function ei(e,t){return ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ei(e,t)}function ti(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function ri(e){return ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ri(e)}function ni(e,t,r){return(t=oi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oi(e){var t=function(e,t){if(\"object\"!=Xo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=Xo(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==Xo(t)?t:String(t)}function ii(e,t,r){!function(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}(e,t),t.set(e,r)}function ai(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(e,ui(e,t,\"set\"),r),r}function si(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ui(e,t,\"get\"))}function ui(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}var ci=new WeakMap,li=new WeakMap;const fi=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&ei(e,t)}(p,t);var r,n,o,s,c=(o=p,s=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ri(o);if(s){var r=ri(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===Xo(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return ti(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ii(ti(e=c.call.apply(c,[this].concat(r))),ci,{writable:!0,value:void 0}),ii(ti(e),li,{writable:!0,value:void 0}),ni(ti(e),\"_defaultStorageType\",u.PLATFORM_INTERNAL),ni(ti(e),\"_isPlayerAuthorized\",!0),e}return r=p,(n=[{key:\"platformId\",get:function(){return e.PLAYDECK}},{key:\"platformLanguage\",get:function(){return si(this,ci)?si(this,ci):Qo(ri(p.prototype),\"platformLanguage\",this)}},{key:\"isPlayerAuthorizationSupported\",get:function(){return!0}},{key:\"isShareSupported\",get:function(){return!0}},{key:\"isPaymentsSupported\",get:function(){return!0}},{key:\"initialize\",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),window.addEventListener(\"message\",(function t(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if(\"getUserProfile\"===o.method){var i=o.value;e._playerId=i.telegramId,e._playerPhotos=[i.avatar],e._playerName=i.username,ai(e,ci,i.locale),ai(e,li,i.params),window.removeEventListener(\"message\",t),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}}})),window.parent.postMessage({playdeck:{method:\"getUserProfile\"}},\"*\")),t.promise}},{key:\"sendMessage\",value:function(e){switch(e){case l.GAME_OVER:return window.parent.postMessage({playdeck:{method:\"gameEnd\"}},\"*\"),Promise.resolve();case l.GAME_READY:return window.parent.postMessage({playdeck:{method:\"loading\",value:100}},\"*\"),Promise.resolve();default:return Qo(ri(p.prototype),\"sendMessage\",this).call(this,e)}}},{key:\"showInterstitial\",value:function(){var e=this;window.addEventListener(\"message\",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case\"startAd\":e._setInterstitialState(i.OPENED);break;case\"rewardedAd\":case\"skipAd\":e._setInterstitialState(i.CLOSED),window.removeEventListener(\"message\",t);break;case\"errAd\":case\"notFoundAd\":e._setInterstitialState(i.FAILED),window.removeEventListener(\"message\",t)}})),window.parent.postMessage({playdeck:{method:\"showAd\"}},\"*\")}},{key:\"showRewarded\",value:function(){var e=this;window.addEventListener(\"message\",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case\"startAd\":e._setRewardedState(a.OPENED);break;case\"rewardedAd\":e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),window.removeEventListener(\"message\",t);break;case\"skipAd\":e._setRewardedState(a.CLOSED),window.removeEventListener(\"message\",t);break;case\"errAd\":case\"notFoundAd\":e._setRewardedState(a.FAILED),window.removeEventListener(\"message\",t)}})),window.parent.postMessage({playdeck:{method:\"showAd\"}},\"*\")}},{key:\"authorizePlayer\",value:function(){return Promise.resolve()}},{key:\"isStorageSupported\",value:function(e){return e===u.PLATFORM_INTERNAL||Qo(ri(p.prototype),\"isStorageSupported\",this).call(this,e)}},{key:\"isStorageAvailable\",value:function(e){return e===u.PLATFORM_INTERNAL||Qo(ri(p.prototype),\"isStorageAvailable\",this).call(this,e)}},{key:\"getDataFromStorage\",value:function(e,t){return t===u.PLATFORM_INTERNAL?new Promise((function(t){var r={},n=Array.isArray(e)?e:[e];window.addEventListener(\"message\",(function o(i){var a=i.data;if(a&&a.playdeck){var s=a.playdeck;if(\"getData\"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener(\"message\",o);var u=Array.isArray(e)?e.map((function(e){return r[e]})):r[e];t(u)}}})),n.forEach((function(e){return window.parent.postMessage({playdeck:{method:\"getData\",key:e}},\"*\")}))})):Qo(ri(p.prototype),\"getDataFromStorage\",this).call(this,e,t)}},{key:\"setDataToStorage\",value:function(e,t,r){return r===u.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(e)?e:[e],o=(Array.isArray(t)?t:[t]).map((function(e){return\"string\"!=typeof e?JSON.stringify(e):e}));n.forEach((function(e,t){return window.parent.postMessage({playdeck:{method:\"setData\",key:e,value:o[t]}},\"*\")})),r()})):Qo(ri(p.prototype),\"setDataToStorage\",this).call(this,e,t,r)}},{key:\"deleteDataFromStorage\",value:function(e,t){return t===u.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return window.parent.postMessage({playdeck:{method:\"setData\",key:e,value:\"\"}},\"*\")})),t()})):Qo(ri(p.prototype),\"deleteDataFromStorage\",this).call(this,e,t)}},{key:\"share\",value:function(){window.parent.postMessage({playdeck:{method:\"customShare\",value:si(this,li)}},\"*\")}},{key:\"purchase\",value:function(e){var t=this,r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),window.addEventListener(\"message\",(function e(t){var r=t.data,n=null==r?void 0:r.playdeck;n&&\"requestPayment\"===n.method&&(console.log(n.value.url),window.parent.postMessage({playdeck:{method:\"openTelegramLink\",value:n.value.url}},\"*\"),window.removeEventListener(\"message\",e))})),window.addEventListener(\"message\",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&\"invoiceClosed\"===o.method&&(\"paid\"===o.value.status?(window.removeEventListener(\"message\",e),t._resolvePromiseDecorator(f.PURCHASE,o.value)):\"cancelled\"!==o.value.status&&\"failed\"!==o.value.status||(window.removeEventListener(\"message\",e),t._rejectPromiseDecorator(f.PURCHASE,o.value)))})),window.parent.postMessage({playdeck:{method:\"requestPayment\",value:e}},\"*\")),r.promise}}])&&$o(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),p}(Wt);function pi(e){return pi=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},pi(e)}function yi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=mi(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,mi(n.key),n)}}function mi(e){var t=function(e,t){if(\"object\"!=pi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=pi(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==pi(t)?t:String(t)}function vi(){return vi=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},vi.apply(this,arguments)}function _i(e,t){return _i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_i(e,t)}function bi(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function gi(e){return gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gi(e)}function Si(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}function wi(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Pi(e,t,\"get\"))}function Pi(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}var Ei=new WeakMap,Ai=new WeakSet;function Oi(){this._playerId=this._platformSdk.player.getId(),this._playerName=this._platformSdk.player.getName(),this._playerPhotos=[this._platformSdk.player.getPhoto()]}const ki=function(t){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&_i(e,t)}(y,t);var r,n,o,c,p=(o=y,c=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gi(o);if(c){var r=gi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&(\"object\"===pi(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return bi(e)}(this,e)});function y(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,y);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Si(t=bi(e=p.call.apply(p,[this].concat(o))),r=Ai),r.add(t),function(e,t,r){Si(e,t),t.set(e,{writable:!0,value:void 0})}(bi(e),Ei),e}return r=y,(n=[{key:\"platformId\",get:function(){return e.WORTAL}},{key:\"platformLanguage\",get:function(){if(this._platformSdk){var e=this._platformSdk.session.getLocale();if(e)return e.toLowerCase().slice(0,2)}return vi(gi(y.prototype),\"platformLanguage\",this)}},{key:\"deviceType\",get:function(){var e=this._platformSdk.session.getDevice();return e?e.toLowerCase():vi(gi(y.prototype),\"deviceType\",this)}},{key:\"initialize\",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),zt(\"https://storage.googleapis.com/cdn-wortal-ai/v2/wortal-core.js\").then((function(){Ht(\"Wortal\",\"initializeAsync\").then((function(){window.Wortal.initializeAsync().then((function(){var t,r,n;e._platformSdk=window.Wortal,t=e,r=Ei,n=e._platformSdk.getSupportedAPIs(),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(t,Pi(t,r,\"set\"),n),e._isBannerSupported=wi(e,Ei).includes(\"ads.showBanner\"),e._platformSdk.player.onLogin(function(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}(e,Ai,Oi)),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))),t.promise}},{key:\"sendMessage\",value:function(e){switch(e){case l.GAMEPLAY_STARTED:return this._platformSdk.session.gameplayStart(),Promise.resolve();case l.GAMEPLAY_STOPPED:return this._platformSdk.session.gameplayStop(),Promise.resolve();case l.GAME_READY:return this._platformSdk.setLoadingProgress(100),this._platformSdk.startGameAsync(),Promise.resolve();case l.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.session.happyTime(),Promise.resolve();default:return vi(gi(y.prototype),\"sendMessage\",this).call(this,e)}}},{key:\"showBanner\",value:function(e){var t=\"bottom\";e&&\"string\"==typeof e.position&&(t=e.position),this._platformSdk.ads.showBanner(!0,t),this._setBannerState(s.SHOWN)}},{key:\"hideBanner\",value:function(){this._platformSdk.ads.showBanner(!1),this._setBannerState(s.HIDDEN)}},{key:\"showInterstitial\",value:function(e){var t=this,r=\"next\",n=\"NextLevel\";e&&(e.placement&&(r=e.placement),e.description&&(n=e.description)),this._platformSdk.ads.showInterstitial(r,n,(function(){t._setInterstitialState(i.OPENED)}),(function(){t._setInterstitialState(i.CLOSED)}),(function(){t._setInterstitialState(i.FAILED)}))}},{key:\"showRewarded\",value:function(e){var t=this,r=\"Bonus\";e&&e.description&&(r=e.description),this._platformSdk.ads.showRewarded(r,(function(){t._setRewardedState(a.OPENED)}),(function(){t._setRewardedState(a.CLOSED)}),(function(){t._setRewardedState(a.CLOSED)}),(function(){t._setRewardedState(a.REWARDED)}),(function(){t._setRewardedState(a.FAILED)}))}},{key:\"checkAdBlock\",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.ads.isAdBlocked())}))}},{key:\"isStorageSupported\",value:function(e){return e===u.PLATFORM_INTERNAL?wi(this,Ei).includes(\"player.setDataAsync\"):vi(gi(y.prototype),\"isStorageSupported\",this).call(this,e)}},{key:\"isStorageAvailable\",value:function(e){return e===u.PLATFORM_INTERNAL?wi(this,Ei).includes(\"player.setDataAsync\"):vi(gi(y.prototype),\"isStorageAvailable\",this).call(this,e)}},{key:\"getDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){var o=Array.isArray(e)?e:[e];r._platformSdk.player.getDataAsync(o).then((function(n){if(r._platformStorageCachedData||(r._platformStorageCachedData={}),Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===n[e[i]]?null:n[e[i]];o.push(a),r._platformStorageCachedData[e[i]]=a}t(o)}else{var s=void 0===n[e]?null:n[e];r._platformStorageCachedData[e]=s,t(s)}})).catch((function(e){return n(e)}))})):vi(gi(y.prototype),\"getDataFromStorage\",this).call(this,e,t)}},{key:\"setDataToStorage\",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?di({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.player.setDataAsync(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){return o(e)}))})):vi(gi(y.prototype),\"setDataToStorage\",this).call(this,e,t,r)}},{key:\"deleteDataFromStorage\",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){var o=null!==r._platformStorageCachedData?di({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.player.setDataAsync(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){return n(e)}))})):vi(gi(y.prototype),\"deleteDataFromStorage\",this).call(this,e,t)}}])&&hi(r.prototype,n),Object.defineProperty(r,\"prototype\",{writable:!1}),y}(Wt);function Ti(e){return Ti=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Ti(e)}function Di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ii(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,Ri(n.key),n)}}function Ri(e){var t=function(e,t){if(\"object\"!=Ti(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,\"string\");if(\"object\"!=Ti(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==Ti(t)?t:String(t)}function ji(e,t){Ni(e,t),t.add(e)}function Li(e,t,r){Ni(e,t),t.set(e,r)}function Ni(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")}function Ci(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError(\"attempted to set read only private field\");t.value=r}}(e,Fi(e,t,\"set\"),r),r}function Bi(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to get private field on non-instance\");return r}function Mi(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Fi(e,t,\"get\"))}function Fi(e,t,r){if(!t.has(e))throw new TypeError(\"attempted to \"+r+\" private field on non-instance\");return t.get(e)}var Gi=new WeakMap,Wi=new WeakMap,zi=new WeakMap,Hi=new WeakMap,Ui=new WeakSet,xi=new WeakSet,Vi=new WeakSet;function Yi(){var t=e.MOCK;if(this._options&&this._options.forciblySetPlatformId)t=Bi(this,xi,Zi).call(this,this._options.forciblySetPlatformId.toLowerCase());else{var r=new URL(window.location.href),n=[\"y\",\"a\",\"n\",\"d\",\"e\",\"x\",\".\",\"n\",\"e\",\"t\"].join(\"\");r.searchParams.has(\"platform_id\")?t=Bi(this,xi,Zi).call(this,r.searchParams.get(\"platform_id\").toLowerCase()):r.hostname.includes(n)||r.hash.includes(\"yandex\")?t=e.YANDEX:r.hostname.includes(\"crazygames.\")||r.hostname.includes(\"1001juegos.com\")?t=e.CRAZY_GAMES:r.hostname.includes(\"gamedistribution.com\")?t=e.GAME_DISTRIBUTION:r.hostname.includes(\"wortal.ai\")?t=e.WORTAL:r.searchParams.has(\"api_id\")&&r.searchParams.has(\"viewer_id\")&&r.searchParams.has(\"auth_key\")?t=e.VK:r.searchParams.has(\"app_id\")&&r.searchParams.has(\"player_id\")&&r.searchParams.has(\"game_sid\")&&r.searchParams.has(\"auth_key\")?t=e.ABSOLUTE_GAMES:r.searchParams.has(\"playdeck\")&&(t=e.PLAYDECK)}switch(t){case e.VK:Ci(this,zi,new nr(this._options&&this._options.platforms&&this._options.platforms[e.VK]));break;case e.VK_PLAY:Ci(this,zi,new zn(this._options&&this._options.platforms&&this._options.platforms[e.VK_PLAY]));break;case e.YANDEX:Ci(this,zi,new Ar(this._options&&this._options.platforms&&this._options.platforms[e.YANDEX]));break;case e.CRAZY_GAMES:Ci(this,zi,new Vr(this._options&&this._options.platforms&&this._options.platforms[e.CRAZY_GAMES]));break;case e.ABSOLUTE_GAMES:Ci(this,zi,new nn(this._options&&this._options.platforms&&this._options.platforms[e.ABSOLUTE_GAMES]));break;case e.GAME_DISTRIBUTION:Ci(this,zi,new hn(this._options&&this._options.platforms&&this._options.platforms[e.GAME_DISTRIBUTION]));break;case e.OK:Ci(this,zi,new xo(this._options&&this._options.platforms&&this._options.platforms[e.OK]));break;case e.PLAYGAMA:Ci(this,zi,new qo(this._options&&this._options.platforms&&this._options.platforms[e.PLAYGAMA]));break;case e.WORTAL:Ci(this,zi,new ki(this._options&&this._options.platforms&&this._options.platforms[e.WORTAL]));break;case e.PLAYDECK:Ci(this,zi,new fi(this._options&&this._options.platforms&&this._options.platforms[e.PLAYDECK]));break;default:Ci(this,zi,new Wt)}}function Zi(t){for(var r=Object.values(e),n=0;n<r.length;n++)if(t===r[n])return t;return e.MOCK}function Ki(e){return Mi(this,Gi)||console.error(p),Mi(this,Hi)[e]}const Ji=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,r),ji(this,Vi),ji(this,xi),ji(this,Ui),Li(this,Gi,{writable:!0,value:!1}),Li(this,Wi,{writable:!0,value:null}),Li(this,zi,{writable:!0,value:null}),Li(this,Hi,{writable:!0,value:{}})}var f,p;return f=r,p=[{key:\"version\",get:function(){return\"1.14.0\"}},{key:\"isInitialized\",get:function(){return Mi(this,Gi)}},{key:\"platform\",get:function(){return Bi(this,Vi,Ki).call(this,t.PLATFORM)}},{key:\"player\",get:function(){return Bi(this,Vi,Ki).call(this,t.PLAYER)}},{key:\"game\",get:function(){return Bi(this,Vi,Ki).call(this,t.GAME)}},{key:\"storage\",get:function(){return Bi(this,Vi,Ki).call(this,t.STORAGE)}},{key:\"advertisement\",get:function(){return Bi(this,Vi,Ki).call(this,t.ADVERTISEMENT)}},{key:\"social\",get:function(){return Bi(this,Vi,Ki).call(this,t.SOCIAL)}},{key:\"device\",get:function(){return Bi(this,Vi,Ki).call(this,t.DEVICE)}},{key:\"leaderboard\",get:function(){return Bi(this,Vi,Ki).call(this,t.LEADERBOARD)}},{key:\"payments\",get:function(){return Bi(this,Vi,Ki).call(this,t.PAYMENTS)}},{key:\"remoteConfig\",get:function(){return Bi(this,Vi,Ki).call(this,t.REMOTE_CONFIG)}},{key:\"clipboard\",get:function(){return Bi(this,Vi,Ki).call(this,t.CLIPBOARD)}},{key:\"PLATFORM_ID\",get:function(){return e}},{key:\"PLATFORM_MESSAGE\",get:function(){return l}},{key:\"MODULE_NAME\",get:function(){return t}},{key:\"EVENT_NAME\",get:function(){return n}},{key:\"INTERSTITIAL_STATE\",get:function(){return i}},{key:\"REWARDED_STATE\",get:function(){return a}},{key:\"BANNER_STATE\",get:function(){return s}},{key:\"STORAGE_TYPE\",get:function(){return u}},{key:\"VISIBILITY_STATE\",get:function(){return o}},{key:\"DEVICE_TYPE\",get:function(){return c}},{key:\"initialize\",value:function(e){var r=this;return Mi(this,Gi)?Promise.resolve():(Mi(this,Wi)||(Ci(this,Wi,new D),this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Ri(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),Bi(this,Ui,Yi).call(this),Mi(this,zi).initialize().then((function(){Mi(r,Hi)[t.PLATFORM]=new G(Mi(r,zi)),Mi(r,Hi)[t.PLAYER]=new V(Mi(r,zi)),Mi(r,Hi)[t.GAME]=new ee(Mi(r,zi)),Mi(r,Hi)[t.STORAGE]=new ae(Mi(r,zi)),Mi(r,Hi)[t.ADVERTISEMENT]=new Je(Mi(r,zi)),Mi(r,Hi)[t.SOCIAL]=new tt(Mi(r,zi)),Mi(r,Hi)[t.DEVICE]=new st(Mi(r,zi)),Mi(r,Hi)[t.LEADERBOARD]=new yt(Mi(r,zi)),Mi(r,Hi)[t.PAYMENTS]=new bt(Mi(r,zi)),Mi(r,Hi)[t.REMOTE_CONFIG]=new At(Mi(r,zi)),Mi(r,Hi)[t.CLIPBOARD]=new Rt(Mi(r,zi)),Ci(r,Gi,!0),console.info(\"%c InstantGamesBridge v.\".concat(r.version,\" initialized. \"),\"background: #01A5DA; color: white\"),Mi(r,Wi)&&(Mi(r,Wi).resolve(),Ci(r,Wi,null))}))),Mi(this,Wi).promise)}}],p&&Ii(f.prototype,p),Object.defineProperty(f,\"prototype\",{writable:!1}),r}();window.bridge=new Ji,window.instantGamesBridge=window.bridge})()})();\r",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "fullName": "",
      "functionType": "Action",
      "name": "onScenePreEvents",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_events_subscribed",
                "=",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "InstantGamesBridge::SubscribeEvents"
              },
              "parameters": [
                "",
                ""
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_events_subscribed",
                "True",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Subscribe Events.",
      "fullName": "Subscribe Events",
      "functionType": "Action",
      "name": "SubscribeEvents",
      "private": true,
      "sentence": "Subscribe Events",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "var rewState = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Reward_State\");",
            "var rewRewarded = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Reward_Rewarded\");",
            "var intState = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Inters_State\");",
            "",
            "var sound_manager = runtimeScene.getGame().getSoundManager();",
            "let volumen = sound_manager.getGlobalVolume();",
            "let allow_visible = true;",
            "",
            "if (bridge && bridge.advertisement && bridge.game) {",
            "",
            "    bridge.advertisement.on('rewarded_state_changed', state => {",
            "        rewState.setString(state);",
            "        game_state(state);",
            "",
            "        if (state === \"rewarded\"){",
            "            rewRewarded.setBoolean(true)",
            "        }",
            "    });",
            "",
            "    bridge.advertisement.on('interstitial_state_changed', state => {",
            "            intState.setString(state); ",
            "            game_state(state);",
            "    })",
            "",
            "    bridge.game.on('visibility_state_changed', state => {",
            "        if(allow_visible){",
            "            if(state === \"visible\"){",
            "                play_sound()",
            "            } else{",
            "                mute_sound()",
            "            }",
            "        }",
            "    })",
            "",
            "",
            "}",
            "",
            "function game_state(state){",
            "    if (state === \"opened\") {",
            "        allow_visible = false;",
            "        mute_sound()",
            "    } else if (state === \"closed\"){",
            "        allow_visible = true;",
            "        play_sound()",
            "    }",
            "}",
            "",
            "function getVolume(){",
            "    if(sound_manager.getGlobalVolume() !== 0){",
            "        volumen = sound_manager.getGlobalVolume();",
            "    };",
            "}",
            "",
            "function mute_sound(){",
            "    getVolume();",
            "    sound_manager.setGlobalVolume(0);",
            "    runtimeScene.getGame().pause(true);  ",
            "}",
            "",
            "function play_sound(){",
            "    sound_manager.setGlobalVolume(volumen);",
            "    runtimeScene.getGame().pause(false);",
            "}",
            "",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Initialize selected platform (mock - no platform).",
      "fullName": "Initialize IGB to selected platform",
      "functionType": "Action",
      "group": "Initialization",
      "name": "IGB_initialize",
      "sentence": "Initialize IGB to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BuiltinCommonInstructions::Once"
              },
              "parameters": []
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var init = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_initialize\");",
                "",
                "let options = {",
                "",
                "    forciblySetPlatformId: eventsFunctionContext.getArgument(\"Platform\"),",
                "",
                "}",
                "",
                "bridge.initialize(options)",
                "    .then(() => {",
                "        init.setBoolean(true)",
                "    })",
                "    .catch(error => {",
                "        console.log(\"Failed to initialize\")",
                "    })",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Platform",
          "name": "Platform",
          "supplementaryInformation": "[\"yandex\",\"vk\",\"ok\",\"crazy_games\",\"absolute_games\",\"playgama\",\"wortal\",\"playdeck\",\"telegram\",\"mock\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Initialize selected platform by Game ID.",
      "fullName": "Initialize IGB to selected platform (by Game ID)",
      "functionType": "Action",
      "group": "Initialization",
      "name": "IGB_initialize_gameId",
      "sentence": "Initialize IGB to _PARAM1_ by Game ID _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BuiltinCommonInstructions::Once"
              },
              "parameters": []
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var init = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_initialize\");",
                "var platform_name = eventsFunctionContext.getArgument(\"Platform\");",
                "",
                "let options = {",
                "    forciblySetPlatformId: platform_name,",
                "    platforms: {}",
                "};",
                "",
                "options.platforms[platform_name] = { ",
                "    gameId: eventsFunctionContext.getArgument(\"GameID\")",
                "};",
                "",
                "bridge.initialize(options)",
                "    .then(() => {",
                "        init.setBoolean(true)",
                "    })",
                "    .catch(error => {",
                "        console.log(\"Failed to initialize\")",
                "    })",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Platform",
          "name": "Platform",
          "supplementaryInformation": "[\"game_distribution\",\"vk_play\"]",
          "type": "stringWithSelector"
        },
        {
          "description": "GameID",
          "name": "GameID",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Automatically detect platform and initialize IGB.",
      "fullName": "Auto Initialize IGB",
      "functionType": "Action",
      "group": "Initialization",
      "name": "IGB_Auto_initialize",
      "sentence": "Auto Initialize IGB",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BuiltinCommonInstructions::Once"
              },
              "parameters": []
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var init = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_initialize\");",
                "",
                "bridge.initialize()",
                "    .then(() => {",
                "        init.setBoolean(true)",
                "    })",
                "    .catch(error => {",
                "        console.log(\"Failed to initialize\")",
                "    })",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is IGB initialized",
      "fullName": "Is IGB initialized",
      "functionType": "Condition",
      "group": "Initialization",
      "name": "IsInizialize",
      "sentence": "Is IGB initialized",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Check Platform type",
      "fullName": "Platform type",
      "functionType": "Condition",
      "group": "Platform",
      "name": "PlatformType",
      "sentence": "Is platform type _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const type = eventsFunctionContext.getArgument('type');",
                "var platform = bridge.platform.id;",
                "",
                "if(type === platform){",
                "    eventsFunctionContext.returnValue = true",
                "}",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Type",
          "name": "type",
          "supplementaryInformation": "[\"yandex\",\"vk\",\"ok\",\"crazy_games\",\"absolute_games\",\"game_distribution\",\"vk_play\",\"playgama\",\"mock\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Check Platform language (Format: ISO 639-1. Example: ru, en).",
      "fullName": "Platform language",
      "functionType": "Condition",
      "group": "Platform",
      "name": "PlatformLang",
      "sentence": "Is platform language _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var lang = bridge.platform.language",
                "var langVar = eventsFunctionContext.getArgument(\"Lang\");",
                "",
                "if(lang === langVar){",
                "    eventsFunctionContext.returnValue = true",
                "}",
                " "
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Language (Format: ISO 639-1)",
          "name": "Lang",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Check Platform Tld (Yandex: com, ru, etc. Other: null).",
      "fullName": "Platform Tld",
      "functionType": "Condition",
      "group": "Platform",
      "name": "PlatformTld",
      "sentence": "Is Platform Tld  _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var platform = bridge.platform.tld",
                "var platformVar = eventsFunctionContext.getArgument('Tld');",
                "",
                "if(platform === platformVar){",
                "    eventsFunctionContext.returnValue = true",
                "}",
                " "
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Platform Tld (Yandex: com, ru, etc. Other: null).",
          "name": "Tld",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Device type.",
      "fullName": "Device type",
      "functionType": "Condition",
      "group": "Platform",
      "name": "DeviceType",
      "sentence": "Is Device type _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "let value;",
                "if (bridge && bridge.device) {",
                "    value = bridge.device.type;",
                "}",
                "",
                "if (value === eventsFunctionContext.getArgument('type')){",
                "    eventsFunctionContext.returnValue = true;",
                "} else {",
                "    eventsFunctionContext.returnValue = false;",
                "}",
                "",
                "",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Type",
          "name": "type",
          "supplementaryInformation": "[\"mobile\",\"tablet\",\"desktop\",\"tv\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Is Authorization Supported.",
      "fullName": "Is Authorization Supported",
      "functionType": "Condition",
      "group": "Authorization",
      "name": "IsAuthorizeSupported",
      "sentence": "Is Authorization Supported",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "eventsFunctionContext.returnValue = bridge.player.isAuthorizationSupported",
                "",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is Player Authorized.",
      "fullName": "Is Player Authorized",
      "functionType": "Condition",
      "group": "Authorization",
      "name": "IsAuthorized",
      "sentence": "Is Player Authorized",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "eventsFunctionContext.returnValue = bridge.player.isAuthorized",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get Player ID.",
      "fullName": "Get Player ID",
      "functionType": "StringExpression",
      "group": "Player",
      "name": "PlayerID",
      "sentence": "Yandex Games Rate",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::IsAuthorizeSupported"
              },
              "parameters": [
                "",
                ""
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::IsAuthorized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = bridge.player.id",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get Player Name.",
      "fullName": "Get Player Name",
      "functionType": "StringExpression",
      "group": "Player",
      "name": "PlayerName",
      "sentence": "Yandex Games Rate",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::IsAuthorizeSupported"
              },
              "parameters": [
                "",
                ""
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::IsAuthorized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = bridge.player.name",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Replace object image with Player Avatar.",
      "fullName": "Replace image with Player Avatar",
      "functionType": "Action",
      "group": "Animations and images",
      "name": "GetAvatar",
      "sentence": "Replace _PARAM1_ image with Player Avatar",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::IsAuthorizeSupported"
              },
              "parameters": [
                "",
                ""
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::IsAuthorized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var arrayPhoto = bridge.player.photos;\r",
                "var base = eventsFunctionContext.getObjects(\"obj\");\r",
                "\r",
                "const texture = PIXI.BaseTexture.from(arrayPhoto[0]);\r",
                "for (const obj of base) obj.getRendererObject().texture.baseTexture = texture;\r",
                "\r",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Avatar object",
          "name": "obj",
          "supplementaryInformation": "Sprite",
          "type": "objectList"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Authorize Player.",
      "fullName": "Authorize Player",
      "functionType": "Action",
      "group": "Authorization",
      "name": "AuthorizePlayer",
      "sentence": "Authorize Player",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "let options = { }\r",
                "\r",
                "switch (bridge.platform.id) {\r",
                "    case 'yandex':\r",
                "        options = {\r",
                "            scopes: true \r",
                "        }\r",
                "        break\r",
                "}\r",
                "\r",
                "bridge.player.authorize(options)\r",
                "    .then(() => {\r",
                "        \r",
                "    })\r",
                "    .catch(error => {\r",
                "    })"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get Server Time.",
      "fullName": "Get Server Time",
      "functionType": "Action",
      "group": "Platform",
      "name": "GetServerTime",
      "sentence": "Get Server Time",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var timeVar = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_ServerTime\");\r",
                "var getSuccess = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_GetServerTimeSuccess\");\r",
                "\r",
                "bridge.platform.getServerTime()\r",
                "    .then(result => {\r",
                "        timeVar.setNumber(result);\r",
                "        getSuccess.setBoolean(true);\r",
                "    })\r",
                "    .catch(error => {\r",
                "        console.log(error)\r",
                "    })\r",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is server time received.",
      "fullName": "Is server time received",
      "functionType": "Condition",
      "group": "Platform",
      "name": "ServerTimeReceived",
      "sentence": "Is server time received",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_GetServerTimeSuccess",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_GetServerTimeSuccess",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Server Time Value.",
      "fullName": "Server Time Value",
      "functionType": "Expression",
      "group": "Platform",
      "name": "ServerTimeValue",
      "sentence": "Has Server Time",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "IGB_ServerTime"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Check AdBlock.",
      "fullName": "Check AdBlock",
      "functionType": "Action",
      "group": "ADS",
      "name": "CheckAdBlock",
      "sentence": "Check AdBlock",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var adblock = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_AdBlock\");",
                "        ",
                "bridge.advertisement.checkAdBlock()",
                "    .then(result => {",
                "        adblock.setBoolean(result);",
                "    })",
                "    .catch(error => {",
                "        console.log(error)",
                "    })",
                "",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is Adblock detected.",
      "fullName": "Is Adblock detected",
      "functionType": "Condition",
      "group": "ADS",
      "name": "IsAdBlock",
      "sentence": "Is Adblock detected",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_AdBlock",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get player info.",
      "fullName": "Get player info",
      "functionType": "Action",
      "group": "General",
      "name": "YandexAuthorize",
      "private": true,
      "sentence": "Get player info. Name set to _PARAM1_, id set to _PARAM2_. Get Avatar _PARAM3_ set to _PARAM4_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var nameVar = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"nameVar\"));\r",
                "var idVar = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"idVar\"));\r",
                "var condVar = runtimeScene.getGame().getVariables().get(\"IGB_YA_NoAuthorizes\");\r",
                "\r",
                "var getImg = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"getImg\"));\r",
                " \r",
                "let authorizationOptions = {\r",
                "    'yandex': {\r",
                "        scopes: true\r",
                "    }\r",
                "}\r",
                "\r",
                "bridge.player.authorize(authorizationOptions)\r",
                "    .then(() => {\r",
                "        var name = bridge.player.name;\r",
                "        var id = bridge.player.id;\r",
                "\r",
                "        nameVar.setString(name);\r",
                "        idVar.setString(id);\r",
                "\r",
                "        if (getImg){\r",
                "            var arrayPhoto = bridge.player.photos;\r",
                "            var base = eventsFunctionContext.getObjects(\"obj\");\r",
                "\r",
                "            console.log(\"FOTO: \", arrayPhoto[0]);\r",
                "            const texture = PIXI.BaseTexture.from(arrayPhoto[0]);\r",
                "            for (const obj of base) obj.getRendererObject().texture.baseTexture = texture;\r",
                "        }\r",
                "    })\r",
                "    .catch(error => {\r",
                "        condVar.setBoolean(true)\r",
                "    })\r",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Global variable for name (String)",
          "name": "nameVar",
          "type": "string"
        },
        {
          "description": "Global variable for id (String)",
          "name": "idVar",
          "type": "string"
        },
        {
          "defaultValue": "True",
          "description": "Get Avatar",
          "name": "getImg",
          "optional": true,
          "type": "trueorfalse"
        },
        {
          "description": "Avatar object",
          "name": "obj",
          "supplementaryInformation": "Sprite",
          "type": "objectList"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Send Yandex a message \"Game Ready\" ",
      "fullName": "Yandex Game Ready API",
      "functionType": "Action",
      "group": "Bridge Yandex Games",
      "name": "YandexGameReady",
      "sentence": "Send Yandex a message \"Game Ready\" ",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::PlatformType"
              },
              "parameters": [
                "",
                "\"yandex\"",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "bridge.platform.sendMessage('game_ready')",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Yandex Games Rate.",
      "fullName": "Yandex games Rate",
      "functionType": "Action",
      "group": "Bridge Yandex Games",
      "name": "YandexRate",
      "sentence": "Yandex Games Rate",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var yaVariable = runtimeScene.getGame().getVariables().get(\"IGB_YA_socialRate\");\r",
                "\r",
                "bridge.social.rate()\r",
                "    .then(() => {\r",
                "        yaVariable.setBoolean(true);\r",
                "    })\r",
                "    .catch(error => {\r",
                "        yaVariable.setBoolean(false);\r",
                "    })\r",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is player set Yandex Games social rate.",
      "fullName": "Is player set social rate",
      "functionType": "Condition",
      "group": "Bridge Yandex Games",
      "name": "IsYandexRate",
      "sentence": "Is player set Yandex Games social rate",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_YA_socialRate",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_YA_socialRate",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Set Yandex Games leaderboard score.",
      "fullName": "Set leaderboard score",
      "functionType": "Action",
      "group": "Bridge Yandex Games",
      "name": "SetYandexLeadScore",
      "sentence": "Yandex Games set leaderboard _PARAM1_ score _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const scoreVar = eventsFunctionContext.getArgument(\"score\");\r",
                "const leadName = eventsFunctionContext.getArgument(\"LeadName\");\r",
                "var state = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_YA_leaderboardSetSuccess\");\r",
                "\r",
                "let setScoreOptions = {\r",
                "    'yandex': {\r",
                "        leaderboardName: leadName,\r",
                "        score: scoreVar\r",
                "    }\r",
                "};\r",
                "\r",
                "if(scoreVar && leadName){\r",
                "bridge.leaderboard.setScore(setScoreOptions)\r",
                "    .then(() => {\r",
                "        state.setBoolean(true)\r",
                "    })\r",
                "    .catch(error => {\r",
                "        console.error(\"Set Yandex Games leaderboard score failed\", error)\r",
                "        state.setBoolean(false)\r",
                "    })\r",
                "\r",
                " }   "
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Leaderboard name",
          "name": "LeadName",
          "type": "string"
        },
        {
          "description": "Score",
          "name": "score",
          "supplementaryInformation": "object",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Is Last YA Leaderboard Set Score Successfully",
      "fullName": "Is Last YA Leaderboard Set Score Successfully",
      "functionType": "Condition",
      "group": "Bridge Yandex Games",
      "name": "IsSetYALeadScoreSuccess",
      "sentence": "Is Last YA Leaderboard Set Score Successfully",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_YA_leaderboardSetSuccess",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_YA_leaderboardSetSuccess",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get Yandex Games leaderboard score.",
      "fullName": "Get leaderboard score",
      "functionType": "Action",
      "group": "Bridge Yandex Games",
      "name": "GetYandexLeadScore",
      "sentence": "Yandex Games get leaderboard _PARAM1_ score, write to _PARAM2_ global variable",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var yaVar = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"varName\"));\r",
                "const leadName = eventsFunctionContext.getArgument(\"LeadName\");\r",
                "var state = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_YA_leaderboardGetSuccess\");\r",
                "\r",
                "let getScoreOptions = {\r",
                "    'yandex': {\r",
                "        leaderboardName: leadName,\r",
                "    }\r",
                "}\r",
                "\r",
                "bridge.leaderboard.getScore(getScoreOptions)\r",
                "    .then(score => {\r",
                "        yaVar.setNumber(score);\r",
                "        state.setBoolean(true)\r",
                "    })\r",
                "    .catch(error => {\r",
                "        console.error(\"Get Yandex Games leaderboard score failed\", error)\r",
                "    })"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Leaderboard name",
          "name": "LeadName",
          "type": "string"
        },
        {
          "description": "Global variable",
          "longDescription": "The score will be written here",
          "name": "varName",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Is Last YA Leaderboard Get Score Successfully",
      "fullName": "Is Last YA Leaderboard Get Score Successfully",
      "functionType": "Condition",
      "group": "Bridge Yandex Games",
      "name": "IsGetYALeadScoreSuccess",
      "sentence": "Is Last YA Leaderboard Get Score Successfully",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_YA_leaderboardGetSuccess",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_YA_leaderboardGetSuccess",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get leaderboard entries (id, name, photo, score, rank).",
      "fullName": "Get leaderboard entries",
      "functionType": "Action",
      "group": "Bridge Yandex Games",
      "name": "GetYandexLeadEntries",
      "sentence": "Get Leaderboard _PARAM1_ Entries,  include user _PARAM2_, quantity around _PARAM3_,  quantity_top _PARAM4_ write to _PARAM5_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var catalog_array = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"array_name\"));",
                "",
                "let options = { }",
                "",
                "switch (bridge.platform.id) {",
                "    case 'yandex':",
                "        options = {",
                "            leaderboardName: eventsFunctionContext.getArgument(\"lead_name\"),",
                "            includeUser: eventsFunctionContext.getArgument(\"include_user\"), ",
                "            quantityAround: eventsFunctionContext.getArgument(\"quantity_around\"),",
                "            quantityTop: eventsFunctionContext.getArgument(\"quantity_top\")",
                "        }",
                "        break",
                "}",
                "",
                "if(catalog_array){",
                "    bridge.leaderboard.getEntries(options)",
                "        .then(entries => {",
                "            entries.forEach(entry => {",
                "                var newItem = new gdjs.Variable();",
                "                newItem.getChild(\"id\").setString(entry.id);",
                "                newItem.getChild(\"name\").setString(entry.name);",
                "                newItem.getChild(\"photo\").setString(entry.photo);",
                "                newItem.getChild(\"score\").setString(entry.score);",
                "                newItem.getChild(\"rank\").setString(entry.rank);",
                "                ",
                "                var index = catalog_array.getChildrenCount();",
                "                catalog_array.addChild(index.toString(), newItem);",
                "",
                "            })",
                "        })",
                "        .catch(error => {",
                "            console.log(error);",
                "        })",
                "}  else {",
                "    console.log(\"Global Variable \" + eventsFunctionContext.getArgument(\"array_name\") + \" is not exist\");",
                "}"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Leaderboard name",
          "name": "lead_name",
          "type": "string"
        },
        {
          "description": "Include User",
          "name": "include_user",
          "type": "trueorfalse"
        },
        {
          "description": "Quantity Around",
          "name": "quantity_around",
          "type": "expression"
        },
        {
          "description": "Quantity Top",
          "name": "quantity_top",
          "type": "expression"
        },
        {
          "description": "Global variable array name",
          "name": "array_name",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Crazy Games Gameplay started.",
      "fullName": "Gameplay started",
      "functionType": "Action",
      "group": "Bridge Crazy Games",
      "name": "CGGameplayStarted",
      "sentence": "Crazy Games gameplay started",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::PlatformType"
              },
              "parameters": [
                "",
                "\"crazy_games\"",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "bridge.platform.sendMessage(\"gameplay_started\");",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Crazy Games Gameplay stopped.",
      "fullName": "Gameplay stopped",
      "functionType": "Action",
      "group": "Bridge Crazy Games",
      "name": "CGGameplayStopped",
      "sentence": "Crazy Games gameplay stopped",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::PlatformType"
              },
              "parameters": [
                "",
                "\"crazy_games\"",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "bridge.platform.sendMessage(\"gameplay_stopped\");",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Start Crazy Games Happy time.",
      "fullName": "Happy time",
      "functionType": "Action",
      "group": "Bridge Crazy Games",
      "name": "CGHappyTime",
      "sentence": "Crazy Games Happy time",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "InstantGamesBridge::PlatformType"
              },
              "parameters": [
                "",
                "\"crazy_games\"",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "bridge.platform.sendMessage(\"player_got_achievement\");",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Join VK Community.",
      "fullName": "Join Community",
      "functionType": "Action",
      "group": "Bridge VK",
      "name": "VKCommunity",
      "sentence": "VK join Community _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var vkVariable = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_VK_joinCommunity\");\r",
                "\r",
                "\r",
                "let joinCommunityOptions = {\r",
                "    'vk': {\r",
                "        groupId: eventsFunctionContext.getArgument('id')\r",
                "    }\r",
                "}\r",
                "\r",
                "bridge.social.joinCommunity(joinCommunityOptions)\r",
                "    .then(() => {\r",
                "        vkVariable.setBoolean(true);\r",
                "\r",
                "    })\r",
                "    .catch(error => {\r",
                "        vkVariable.setBoolean(false);\r",
                "\r",
                "    })"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Community id",
          "name": "id",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "VK invite friends.",
      "fullName": "Invite friends",
      "functionType": "Action",
      "group": "Bridge VK",
      "name": "VKInvite",
      "sentence": "VK invite friends",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var vkVariable = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_VK_inviteFriends\");\r",
                "\r",
                "bridge.social.inviteFriends()\r",
                "    .then(() => {\r",
                "       vkVariable.setBoolean(true);\r",
                "    })\r",
                "    .catch(error => {\r",
                "        vkVariable.setBoolean(false);\r",
                "    })"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "VK share game link.",
      "fullName": "Share game link",
      "functionType": "Action",
      "group": "Bridge VK",
      "name": "VKShare",
      "sentence": "VK share game link: _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var vkVariable = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_VK_shareGame\");\r",
                "\r",
                "\r",
                "let shareOptions = {\r",
                "    'vk': {\r",
                "        link: eventsFunctionContext.getArgument('link')\r",
                "    }\r",
                "}\r",
                "\r",
                "bridge.social.share(shareOptions)\r",
                "    .then(() => {\r",
                "        vkVariable.setBoolean(true);\r",
                "    })\r",
                "    .catch(error => {\r",
                "        vkVariable.setBoolean(false);\r",
                "    })"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Game link",
          "name": "link",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "VK add to favorites.",
      "fullName": "Add to favorites",
      "functionType": "Action",
      "group": "Bridge VK",
      "name": "VKFavorite",
      "sentence": "VK add to favorites.",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var vkVariable = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_VK_Favorites\");\r",
                "\r",
                "bridge.social.addToFavorites()\r",
                "    .then(() => {\r",
                "       vkVariable.setBoolean(true);\r",
                "    })\r",
                "    .catch(error => {\r",
                "       vkVariable.setBoolean(false);\r",
                "    })"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Show VK leaderboard.",
      "fullName": "Show leaderboard",
      "functionType": "Action",
      "group": "Bridge VK",
      "name": "VKLeaderboard",
      "sentence": "VK show  leaderboard result: _PARAM1_ global: _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var vkVariable = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_VK_showNativePopup\");\r",
                "\r",
                "let showNativePopupOptions = {\r",
                "    'vk': {\r",
                "        userResult: eventsFunctionContext.getArgument('result'),\r",
                "        global: eventsFunctionContext.getArgument('global')\r",
                "    }\r",
                "}\r",
                "bridge.leaderboard.showNativePopup(showNativePopupOptions)\r",
                "    .then(() => {\r",
                "        vkVariable.setBoolean(true);\r",
                "    })\r",
                "    .catch(error => {\r",
                "       vkVariable.setBoolean(false);\r",
                "    })\r",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "User result",
          "name": "result",
          "type": "expression"
        },
        {
          "description": "Global",
          "name": "global",
          "type": "trueorfalse"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Create VK Post.",
      "fullName": "Create Post",
      "functionType": "Action",
      "group": "Bridge VK",
      "name": "VKPost",
      "sentence": "Create VK Post _PARAM1_. Add image _PARAM2_ link _PARAM3_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var vkVariable = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_VK_createPost\");\r",
                "var attach = eventsFunctionContext.getArgument('attachment');\r",
                "\r",
                "let createPostOptions;\r",
                "\r",
                "if(attach){\r",
                "    createPostOptions = {\r",
                "        'vk': {\r",
                "            message: eventsFunctionContext.getArgument('text'),\r",
                "            attachments: eventsFunctionContext.getArgument('photo')\r",
                "        }\r",
                "    }   \r",
                "}else {\r",
                "        createPostOptions = {\r",
                "        'vk': {\r",
                "            message: eventsFunctionContext.getArgument('text')\r",
                "            }\r",
                "        }\r",
                "}\r",
                "\r",
                "\r",
                "bridge.social.createPost(createPostOptions)\r",
                "    .then(() => {\r",
                "       vkVariable.setBoolean(true);\r",
                "    })\r",
                "    .catch(error => {\r",
                "       vkVariable.setBoolean(false);\r",
                "    })"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Message",
          "name": "text",
          "type": "string"
        },
        {
          "defaultValue": "True",
          "description": "Add image",
          "name": "attachment",
          "optional": true,
          "type": "trueorfalse"
        },
        {
          "description": "Image link",
          "name": "photo",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "VK Add to home screen.",
      "fullName": "VK Add to home screen",
      "functionType": "Action",
      "group": "Bridge VK",
      "name": "VKHomeScreen",
      "sentence": "VK Add to home screen",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var vkVariable = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_VK_addToHomeScreen\");\r",
                "\r",
                "bridge.social.addToHomeScreen()\r",
                "    .then(() => {\r",
                "       vkVariable.setBoolean(true);\r",
                "    })\r",
                "    .catch(error => {\r",
                "       vkVariable.setBoolean(false);\r",
                "    })\r",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is player Join VK Community?",
      "fullName": "Is player join to community",
      "functionType": "Condition",
      "group": "Bridge VK",
      "name": "IsVKCommunity",
      "sentence": "Is player join VK Community",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_VK_joinCommunity",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_VK_joinCommunity",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is VK leaderboard was showed?",
      "fullName": "Is leaderboard was showed",
      "functionType": "Condition",
      "group": "Bridge VK",
      "name": "IsVKLeaderboard",
      "sentence": "Is VK leaderboard was showed",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_VK_showNativePopup",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_VK_showNativePopup",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is player invite friends VK.",
      "fullName": "Is player invite friends",
      "functionType": "Condition",
      "group": "Bridge VK",
      "name": "IsVKInvite",
      "sentence": "Is player invite friends VK",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_VK_inviteFriends",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_VK_inviteFriends",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is add to favorites VK.",
      "fullName": "Is add to favorites",
      "functionType": "Condition",
      "group": "Bridge VK",
      "name": "IsVKFavorite",
      "sentence": "Is add to favorites VK",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_VK_Favorites",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_VK_Favorites",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is VK game link shared.",
      "fullName": "Is game link shared",
      "functionType": "Condition",
      "group": "Bridge VK",
      "name": "IsVKShare",
      "sentence": "Is VK game link shared",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_VK_shareGame",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_VK_shareGame",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is VK game added to home screen.",
      "fullName": "Is game added to home screen",
      "functionType": "Condition",
      "group": "Bridge VK",
      "name": "IsVKHomeScreen",
      "sentence": "Is VK game added to home screen",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_VK_addToHomeScreen",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_VK_addToHomeScreen",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Is VK Post created.",
      "fullName": "Is VK Post created",
      "functionType": "Condition",
      "group": "Bridge VK",
      "name": "IsVKPost",
      "sentence": "Is VK Post created",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_VK_createPost",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_VK_createPost",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Show Interstitial ad.",
      "fullName": "Show Interstitial ad",
      "functionType": "Action",
      "group": "ADS",
      "name": "ShowInterstitial",
      "sentence": "Show Interstitial ad. Ignore delay _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "let interstitialOptions = {",
                "    ignoreDelay: eventsFunctionContext.getArgument(\"delay\")",
                "}",
                "",
                "if (bridge && bridge.advertisement) {",
                "    bridge.advertisement.showInterstitial(interstitialOptions);",
                "}",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "defaultValue": "True",
          "description": "Ignore delay",
          "name": "delay",
          "optional": true,
          "type": "trueorfalse"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Set Interstitial ad delay.",
      "fullName": "Set Interstitial ad delay",
      "functionType": "Action",
      "group": "ADS",
      "name": "InterstitialDelay",
      "sentence": "Set Interstitial ad delay _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "let delayOptions = eventsFunctionContext.getArgument(\"delay\")",
                "",
                "if (bridge && bridge.advertisement) {",
                "    bridge.advertisement.setMinimumDelayBetweenInterstitial(delayOptions)",
                "}",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Delay",
          "name": "delay",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Show Rewarded ad.",
      "fullName": "Show Rewarded ad",
      "functionType": "Action",
      "group": "ADS",
      "name": "ShowRewarded",
      "sentence": "Show Rewarded ad",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "if (bridge && bridge.advertisement) {",
                "    bridge.advertisement.showRewarded();",
                "}"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "On Interstitial state.",
      "fullName": "On Interstitial state",
      "functionType": "Condition",
      "group": "ADS",
      "name": "InterstitialState",
      "sentence": "On Interstitial _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "StringVariable"
              },
              "parameters": [
                "IGB_Inters_State",
                "=",
                "state"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "State",
          "name": "state",
          "supplementaryInformation": "[\"opened\",\"closed\",\"loading\",\"failed\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "On Rewarded state.",
      "fullName": "On Rewarded state",
      "functionType": "Condition",
      "group": "ADS",
      "name": "RewardedState",
      "sentence": "On Rewarded _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "CompareArgumentAsString"
                  },
                  "parameters": [
                    "\"state\"",
                    "=",
                    "\"rewarded\""
                  ]
                },
                {
                  "type": {
                    "value": "BooleanVariable"
                  },
                  "parameters": [
                    "IGB_Reward_Rewarded",
                    "True",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "SetReturnBoolean"
                  },
                  "parameters": [
                    "True"
                  ]
                },
                {
                  "type": {
                    "value": "SetBooleanVariable"
                  },
                  "parameters": [
                    "IGB_Reward_Rewarded",
                    "False",
                    ""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "CompareArgumentAsString"
                  },
                  "parameters": [
                    "\"state\"",
                    "!=",
                    "\"rewarded\""
                  ]
                },
                {
                  "type": {
                    "value": "StringVariable"
                  },
                  "parameters": [
                    "IGB_Reward_State",
                    "=",
                    "state"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "SetReturnBoolean"
                  },
                  "parameters": [
                    "True"
                  ]
                }
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "State",
          "name": "state",
          "supplementaryInformation": "[\"rewarded\",\"opened\",\"closed\",\"loading\",\"failed\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get Rewarded state.",
      "fullName": "Get Rewarded state",
      "functionType": "StringExpression",
      "group": "ADS",
      "name": "GetRewardedState",
      "sentence": "Is Rewarded state _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnString"
              },
              "parameters": [
                "IGB_Reward_State"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get Interstitial state.",
      "fullName": "Get Interstitial state",
      "functionType": "StringExpression",
      "group": "ADS",
      "name": "GetInterstitialState",
      "sentence": "Is Rewarded state _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnString"
              },
              "parameters": [
                "IGB_Inters_State"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Append Storage data Set Request",
      "fullName": "Append Storage data Set Request",
      "functionType": "Action",
      "group": "Storage",
      "name": "SetStorageData",
      "sentence": "Append Storage data Set Request. Value: _PARAM1_, key: _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var key = eventsFunctionContext.getArgument('key')",
                "var value = eventsFunctionContext.getArgument('value')",
                "var gdKeyArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Set_keyArray\");",
                "var gdValArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Set_valArray\");",
                "",
                "gdKeyArray.pushValue(key);",
                "gdValArray.pushValue(value);",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Value",
          "name": "value",
          "type": "string"
        },
        {
          "description": "Key name",
          "name": "key",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Send Storage data Set Request",
      "fullName": "Send Storage data Set Request",
      "functionType": "Action",
      "group": "Storage",
      "name": "SendSetStorageData",
      "sentence": "Send Storage data Set Request. Storage type: _PARAM1_. Log: _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const setLog = eventsFunctionContext.getArgument('setLog');",
                "var state = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_StorageSetSuccess\");",
                "var gdKeyArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Set_keyArray\");",
                "var gdValArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Set_valArray\");",
                "let keyArray = [];",
                "let valArray = [];",
                "let options;",
                "",
                "restoreArray(gdKeyArray, keyArray);",
                "restoreArray(gdValArray, valArray);",
                "",
                "const platform = bridge.platform.id;",
                "",
                "const typeArgument = eventsFunctionContext.getArgument('type');",
                "const local_type = bridge.STORAGE_TYPE.LOCAL_STORAGE;",
                "const platform_type = bridge.STORAGE_TYPE.PLATFORM_INTERNAL;",
                "const default_type = bridge.storage.defaultType;",
                "",
                "",
                "if (typeArgument === \"Platform\") {",
                "    if (bridge.storage.isSupported(platform_type)) {",
                "        options = { [platform]: platform_type };",
                "    } else {",
                "        console.log(\"Platform internal is not supported for the \" + platform + \" platform\");",
                "        return",
                "    }",
                "} else if (typeArgument === \"Local\") {",
                "    options = { [platform]: local_type };",
                "} else {",
                "    options = { [platform]: default_type };",
                "}",
                "",
                "bridge.storage.set(keyArray, valArray, options)",
                "    .then(() => {",
                "        gdKeyArray.clearChildren()",
                "        gdValArray.clearChildren()",
                "        state.setBoolean(true)",
                "",
                "        if (setLog){",
                "            console.log('Set storage success. Saved keys:', keyArray)",
                "        }",
                "    })",
                "    .catch(error => {",
                "        console.error(\"Set storage failed \", error);",
                "    });",
                "",
                "function restoreArray (gd, array){",
                "    let allVars = gd.getAllChildren();",
                "    for(let item in allVars) {",
                "        let key = Number(item);",
                "        if(key !== NaN) {",
                "            array[key] = allVars[item].getAsString(); ",
                "        }",
                "    }",
                "}",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Storage type",
          "name": "type",
          "supplementaryInformation": "[\"Default\",\"Local\",\"Platform\"]",
          "type": "stringWithSelector"
        },
        {
          "description": "Log status to the debugger's console",
          "name": "setLog",
          "type": "trueorfalse"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Is Set Storage Data Success",
      "fullName": "Is Set Storage Data Success",
      "functionType": "Condition",
      "group": "Storage",
      "name": "IsSetStorageDataSuccess",
      "sentence": "Is Set Storage Data Success",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_StorageSetSuccess",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_StorageSetSuccess",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Append Storage data Get Request.",
      "fullName": "Append Storage data Get Request",
      "functionType": "Action",
      "group": "Storage",
      "name": "GetStorageData",
      "sentence": "Append Storage data Get Request. Key: _PARAM1_ write to _PARAM2_ ",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var key = eventsFunctionContext.getArgument('key')",
                "var varName = eventsFunctionContext.getArgument('varName')",
                "var gdKeyArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Get_keyArray\");",
                "var gdVarArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Get_varArray\");",
                "",
                "gdKeyArray.pushValue(key);",
                "gdVarArray.pushValue(varName);"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Key name",
          "name": "key",
          "type": "string"
        },
        {
          "description": "Global variable (string)",
          "name": "varName",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Send Storage data Get Request",
      "fullName": "Send Storage data Get Request",
      "functionType": "Action",
      "group": "Storage",
      "name": "SendGetStorageData",
      "sentence": "Send Storage data Get Request. Storage type: _PARAM1_. Log: _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const setLog = eventsFunctionContext.getArgument('setLog');",
                "var gdKeyArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Get_keyArray\");",
                "var gdVarArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Get_varArray\");",
                "let keyArray = [];",
                "let varArray = [];",
                "let options;",
                "",
                "restoreArray (gdKeyArray, keyArray);",
                "restoreArray (gdVarArray, varArray);",
                "",
                "const platform = bridge.platform.id;",
                "",
                "const typeArgument = eventsFunctionContext.getArgument('type');",
                "const local_type = bridge.STORAGE_TYPE.LOCAL_STORAGE;",
                "const platform_type = bridge.STORAGE_TYPE.PLATFORM_INTERNAL;",
                "const default_type = bridge.storage.defaultType;",
                "",
                "if (typeArgument === \"Platform\") {",
                "    if (bridge.storage.isSupported(platform_type)) {",
                "        options = { [platform]: platform_type };",
                "    } else {",
                "        console.log(\"Platform internal is not supported for the \" + platform + \" platform\");",
                "        return",
                "    }",
                "} else if (typeArgument === \"Local\") {",
                "    options = { [platform]: local_type };",
                "} else {",
                "    options = { [platform]: default_type };",
                "}",
                "",
                "bridge.storage.get(keyArray, options)",
                "    .then(data => {",
                "        for (let i = 0; i < data.length; i++) {",
                "            let value = data[i]",
                "            let varName = runtimeScene.getGame().getVariables().get(varArray[i])",
                "",
                "            if (Array.isArray(value)) {",
                "                value = JSON.stringify(value);",
                "            }else if (typeof value === 'object' && value !== null) {",
                "                value = JSON.stringify(value);",
                "            }",
                "",
                "            varName.setString(value);",
                "",
                "            if (setLog){",
                "                console.log('Data', i, \": \", varName)",
                "            }",
                "        }",
                "    })",
                "    .catch(error => {",
                "        console.error(\"Get storage failed \", error);",
                "    });",
                "",
                "",
                "function restoreArray (gd, array){",
                "    let allVars = gd.getAllChildren();",
                "    for(let item in allVars) {",
                "        let key = Number(item);",
                "        if(key !== NaN) {",
                "            array[key] = allVars[item].getAsString(); ",
                "        }",
                "    }",
                "}"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Storage type",
          "name": "type",
          "supplementaryInformation": "[\"Default\",\"Local\",\"Platform\"]",
          "type": "stringWithSelector"
        },
        {
          "description": "Log the data to the debugger's console",
          "name": "setLog",
          "type": "trueorfalse"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Append Storage data Delete Request",
      "fullName": "Append Storage data Delete Request",
      "functionType": "Action",
      "group": "Storage",
      "name": "DelStorageData",
      "sentence": "Append Storage data Delete Request. Key: _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var key = eventsFunctionContext.getArgument('key')",
                "var gdArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Del_keyArray\");",
                "",
                "gdArray.pushValue(key);",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Key",
          "name": "key",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Send Storage data Delete Request",
      "fullName": "Send Storage data Delete Request",
      "functionType": "Action",
      "group": "Storage",
      "name": "SendDelStorageData",
      "sentence": "Send Storage data Delete Request. Storage type: _PARAM1_. Log: _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var setLog = eventsFunctionContext.getArgument('setLog');",
                "var state = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_StorageDelSuccess\");",
                "let gdArray = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_Del_keyArray\");",
                "let keyArray = [];",
                "let options;",
                "",
                "restoreArray (gdArray, keyArray);",
                "",
                "const platform = bridge.platform.id;",
                "",
                "const typeArgument = eventsFunctionContext.getArgument('type');",
                "const local_type = bridge.STORAGE_TYPE.LOCAL_STORAGE;",
                "const platform_type = bridge.STORAGE_TYPE.PLATFORM_INTERNAL;",
                "const default_type = bridge.storage.defaultType;",
                "",
                "if (typeArgument === \"Platform\") {",
                "    if (bridge.storage.isSupported(platform_type)) {",
                "        options = { [platform]: platform_type };",
                "    } else {",
                "        console.log(\"Platform internal is not supported for the \" + platform + \" platform\");",
                "        return",
                "    }",
                "} else if (typeArgument === \"Local\") {",
                "    options = { [platform]: local_type };",
                "} else {",
                "    options = { [platform]: default_type };",
                "}",
                "",
                "bridge.storage.delete(keyArray, options)",
                "    .then(() => {",
                "        gdArray.clearChildren()",
                "        state.setBoolean(true)",
                "",
                "        if (setLog){",
                "            console.log('Delete storage success')",
                "        }",
                "    })",
                "    .catch(error => {",
                "        console.error(\"Delete storage failed\", error);",
                "    });",
                "",
                "",
                "function restoreArray (gd, array){",
                "    let allVars = gd.getAllChildren();",
                "    for(let item in allVars) {",
                "        let key = Number(item);",
                "        if(key !== NaN) {",
                "            array[key] = allVars[item].getAsString(); ",
                "        }",
                "    }",
                "}"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Storage type",
          "name": "type",
          "supplementaryInformation": "[\"Default\",\"Local\",\"Platform\"]",
          "type": "stringWithSelector"
        },
        {
          "description": "Log status to the debugger's console",
          "name": "setLog",
          "type": "trueorfalse"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Is Delete Storage Data Success",
      "fullName": "Is Delete Storage Data Success",
      "functionType": "Condition",
      "group": "Storage",
      "name": "IsDelStorageDataSuccess",
      "sentence": "Is Delete Storage Data Success",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_StorageDelSuccess",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_StorageDelSuccess",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Append Remote Config Get Request.",
      "fullName": "Append Remote Config Get Request",
      "functionType": "Action",
      "group": "Config Request",
      "name": "GetRemoteConfig",
      "private": true,
      "sentence": "Append Remote Config Get Request. Key: _PARAM1_ write to _PARAM2_ ",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_initialize",
                "True",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var catalog_array = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"array_name\"));",
                "",
                "bridge.remoteConfig.get(options)",
                "    .then(data => {",
                "        for (let i = 0; i < data.length; i++) {",
                "            let value = data[i]",
                "",
                "            var index = catalog_array.getChildrenCount();",
                "            catalog_array.addChild(index.toString(), value);",
                "",
                "        }",
                "    })",
                "    .catch(error => {",
                "        // , -   ",
                "    })"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Global variable array name",
          "name": "array_name",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Payments Purchase.",
      "fullName": "Payments Purchase",
      "functionType": "Action",
      "group": "Payments",
      "name": "Purchase",
      "sentence": "Payments Purchase of _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var state = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_PurchaseSuccess\");",
                "let options = { }",
                "",
                "switch (bridge.platform.id) {",
                "    case 'yandex':",
                "        options = {",
                "            id: eventsFunctionContext.getArgument(\"PURCHASE_ID\")",
                "        }",
                "        break",
                "}",
                "",
                "bridge.payments.purchase(options)",
                "    .then(() => {",
                "        state.setBoolean(true);",
                "    })",
                "    .catch(error => {",
                "        console.log(error)",
                "    })"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Purchase ID",
          "name": "PURCHASE_ID",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Is Purchase Success.",
      "fullName": "Is Purchase Success",
      "functionType": "Condition",
      "group": "Payments",
      "name": "IsPurchaseSuccess",
      "sentence": "Is Purchase Success",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_PurchaseSuccess",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_PurchaseSuccess",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Consume Purchase.",
      "fullName": "Consume Purchase",
      "functionType": "Action",
      "group": "Payments",
      "name": "ConsumePurchase",
      "sentence": "Consume Purchase of _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var state = runtimeScene.getGame().getVariablesForExtension(\"InstantGamesBridge\").get(\"IGB_ConsumePurchaseSuccess\");",
                "let options = { }",
                "",
                "switch (bridge.platform.id) {",
                "    case 'yandex':",
                "        options = {",
                "            purchaseToken: eventsFunctionContext.getArgument(\"PURCHASE_TOKEN\")",
                "        }",
                "        break",
                "}",
                "",
                "bridge.payments.consumePurchase(options)",
                "    .then(() => {",
                "       state.setBoolean(true);",
                "    })",
                "    .catch(error => {",
                "        console.log(error)",
                "    })",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Purchase Token",
          "name": "PURCHASE_TOKEN",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Is Consume Purchase Success.",
      "fullName": "Is Consume Purchase Success",
      "functionType": "Condition",
      "group": "Payments",
      "name": "IsConsumePurchaseSuccess",
      "sentence": "Is Consume Purchase Success",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "IGB_initialize",
                "False"
              ]
            },
            {
              "type": {
                "value": "BooleanVariable"
              },
              "parameters": [
                "IGB_ConsumePurchaseSuccess",
                "True",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            },
            {
              "type": {
                "value": "SetBooleanVariable"
              },
              "parameters": [
                "IGB_ConsumePurchaseSuccess",
                "False",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get Catalog (id, title, description, imageURI, price, priceValue, priceCurrencyCode, priceCurrencyImage).",
      "fullName": "Get Catalog",
      "functionType": "Action",
      "group": "Payments",
      "name": "GetCatalog",
      "sentence": "Get Catalog to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var catalog_array = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"array_name\"));",
                "",
                "if(catalog_array){",
                "bridge.payments.getCatalog()",
                "    .then(catalogItems => {",
                "        catalogItems.forEach(catalogItem => {",
                "            var newItem = new gdjs.Variable();",
                "            newItem.getChild(\"id\").setString(catalogItem.id);",
                "            newItem.getChild(\"title\").setString(catalogItem.title);",
                "            newItem.getChild(\"description\").setString(catalogItem.description);",
                "            newItem.getChild(\"imageURI\").setString(catalogItem.imageURI);",
                "            newItem.getChild(\"price\").setString(catalogItem.price);",
                "            newItem.getChild(\"priceValue\").setNumber(catalogItem.priceValue);",
                "            newItem.getChild(\"priceCurrencyCode\").setString(catalogItem.priceCurrencyCode);",
                "            newItem.getChild(\"priceCurrencyImage\").setString(catalogItem.priceCurrencyImage);",
                "            ",
                "            var index = catalog_array.getChildrenCount();",
                "            catalog_array.addChild(index.toString(), newItem);",
                "",
                "        });",
                "    })",
                "    .catch(error => {",
                "        console.log(error);",
                "    });",
                "",
                "} else {",
                "    console.log(\"Global Variable \" + eventsFunctionContext.getArgument(\"array_name\") + \" is not exist\");",
                "}"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Global variable array name",
          "name": "array_name",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get Purchases list (productID, purchaseToken).",
      "fullName": "Get Purchases list",
      "functionType": "Action",
      "group": "Payments",
      "name": "GetPurchases",
      "sentence": "Get Purchases list to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "InstantGamesBridge::IsInizialize"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "var catalog_array = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"array_name\"));",
                "",
                "if(catalog_array){",
                "bridge.payments.getPurchases()",
                "    .then(purchases => {",
                "        purchases.forEach(purchase => {",
                "            var newItem = new gdjs.Variable();",
                "            newItem.getChild(\"productID\").setString(purchase.productID);",
                "            newItem.getChild(\"purchaseToken\").setString(purchase.purchaseToken);",
                "            ",
                "            var index = catalog_array.getChildrenCount();",
                "            catalog_array.addChild(index.toString(), newItem);",
                "",
                "        });",
                "    })",
                "    .catch(error => {",
                "        console.log(error);",
                "    });",
                "",
                "} else {",
                "    console.log(\"Global Variable \" + eventsFunctionContext.getArgument(\"array_name\") + \" is not exist\");",
                "}"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Global variable array name",
          "name": "array_name",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Set background color.",
      "fullName": "Set background color",
      "functionType": "Action",
      "group": "Background",
      "name": "BackgroundColor",
      "sentence": "Set background color _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const rgbcolor = gdjs.rgbOrHexToRGBColor(eventsFunctionContext.getArgument(\"Color\"));",
            "",
            "document.body.style.backgroundColor = `rgb(${rgbcolor[0]},${rgbcolor[1]},${rgbcolor[2]})`;",
            "",
            "",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Color",
          "name": "Color",
          "type": "color"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Set background image.",
      "fullName": "Set background image",
      "functionType": "Action",
      "group": "Background",
      "name": "BackgroundImage",
      "sentence": "Set background image _PARAM1_, Size _PARAM2_, Size value _PARAM3_%, Repeat _PARAM4_, Position _PARAM5_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const img = eventsFunctionContext.getArgument(\"Image\");",
            "const size = eventsFunctionContext.getArgument(\"Size\");",
            "const size_number = eventsFunctionContext.getArgument(\"Size_number\") + \"%\";",
            "const repeat = eventsFunctionContext.getArgument(\"Repeat\");",
            "const position = eventsFunctionContext.getArgument(\"Position\");",
            "",
            "document.body.style.backgroundImage = \"url(\" + img + \")\"",
            "document.body.style.backgroundRepeat  = repeat;",
            "document.body.style.backgroundPosition = position;",
            "",
            "if(size !== \"number\"){",
            "document.body.style.backgroundSize = size;",
            "} else {",
            "    document.body.style.backgroundSize = size_number;",
            "}",
            "",
            "",
            "",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [
        {
          "description": "Image",
          "name": "Image",
          "type": "imageResource"
        },
        {
          "description": "Background size",
          "name": "Size",
          "supplementaryInformation": "[\"auto\",\"cover\",\"number\"]",
          "type": "stringWithSelector"
        },
        {
          "description": "Size value(%)",
          "longDescription": "To work, select \"number\" in the \"Background size\" column",
          "name": "Size_number",
          "type": "expression"
        },
        {
          "description": "Background repeat",
          "name": "Repeat",
          "supplementaryInformation": "[\"repeat\",\"no-repeat\",\"repeat-x\",\"repeat-y\",\"round\"]",
          "type": "stringWithSelector"
        },
        {
          "description": "Background position",
          "name": "Position",
          "supplementaryInformation": "[\"center\",\"left\",\"right\",\"top\",\"bottom\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [],
  "eventsBasedObjects": []
}